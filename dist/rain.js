angular.module("rainMenu",[]),function(){function n(){return{restrict:"AE",require:"^rainMenu",transclude:!0,scope:{label:"@",icon:"@",route:"@"},templateUrl:"rainModules/rainMenu/rainMenuItem/rainMenuItemTemplate.html",link:e}}function e(n,e,i,r){n.isActive=function(){return e===r.getActiveElement()},n.isVertical=function(){return r.isVertical()},e.on("click",function(i){i.stopPropagation(),i.preventDefault(),n.$apply(function(){r.setActiveElement(e),r.setRoute(n.route),n.isVertical()||r.closeCurrentMenu()})})}angular.module("rainMenu").directive("rainMenuItem",n)}(),function(){function n(){return{restrict:"AE",require:"^rainMenu",transclude:!0,scope:{label:"@",icon:"@",route:"@"},templateUrl:"rainModules/rainMenu/rainMenuGroup/rainMenuGroupTemplate.html",link:e}}function e(n,e,i,r){function t(){var n=e.offset(),i=e.find(".r-menu-group-horizontal"),r=40;i&&(r=i.height()),e.find(".r-menu-sub-section").css({left:n.left+2,top:r+6})}n.isOpen=!1,n.closeMenu=function(){n.isOpen=!1},n.isActiveGroup=function(){return e===r.getActiveGroupElement()},n.clicked=function(){n.route&&r.setRoute(n.route),n.isOpen||r.closeCurrentMenu(),n.isOpen=!n.isOpen,n.isVertical()||t(),r.setOpenMenuScope(n)},n.isVertical=function(){return r.isVertical()},e.on("click",function(i){i.stopPropagation(),i.preventDefault(),n.$apply(function(){r.setActiveGroupElement(e),r.setRoute(n.route)})})}angular.module("rainMenu").directive("rainMenuGroup",n)}(),function(){var n=angular.module("rainGrid",[]),e={baseUrl:"rainModules/rainGrid/",version:"1.0.0"};n.value("rainGridConfig",e)}(),function(){function n(){return{restrict:"AE",templateUrl:"rainModules/rainGrid/rainGridMenu/rainGridMenuTemplate.html",replace:!1,scope:{filterData:"&",gridOptions:"="},controller:"rainGrid.menu.controller"}}angular.module("rainGrid").directive("rainGridMenu",[n])}(),function(){function n(n,e){function i(){t(),n.filters=[{col:{},constraint:{},expression:""}],r()}function r(){if(0===n.filters.length)n.hasFiltered=!1;else{var e=n.filters[0];n.hasFiltered=!!e.col&&!!e.constraint&&void 0!==e.expression&&""!==e.expression}}function t(){n.status={isOpen:!1},n.toggled=function(n){console.log("Dropdown is now: ",n)},n.toggleDropdown=function(e){e.preventDefault(),e.stopPropagation(),n.status.isOpen=!n.status.isOpen}}i(),n.doFilter=function(){var i=e.showFilterModal(n.gridOptions,n.filters);i.then(function(e){e.isCancel||(n.filters=e.filters,r(),n.filterData({filters:n.filters}))})},n.removeFilters=function(){n.filters=[{col:{},constraint:{},expression:""}],r(),n.filterData({filters:n.filters})}}angular.module("rainGrid").controller("rainGrid.menu.controller",["$scope","rainGridService",n])}(),function(){function n(n,e,i,r){function t(){r.filters.push({col:{},constraint:{},expression:""})}function l(n){_.remove(r.filters,function(e){return e.col.value===n.value}),0===r.filters.length&&r.filters.push({col:{},constraint:{},expression:""})}function a(){s(),n.close({filters:r.filters,isCancel:!1})}function o(){s(),n.close({filters:r.filters,isCancel:!0})}function s(){_.remove(r.filters,function(n){return!n.col||!n.constraint||void 0===n.expression||""===n.expression}),0===r.filters.length&&r.filters.push({col:{},constraint:{},expression:""})}r.columns=_.map(e,function(n){return{label:n.displayName,value:n.field,isNumber:n.isNumber,isCurrency:n.isCurrency,isBoolean:n.isBoolean||n.isCheckbox,isDate:n.isDate}}),r.filters=i,r.addFilter=t,r.deleteFilter=l,r.doFilter=a,r.doCancel=o}angular.module("rainGrid").controller("rainGrid.filterModal.controller",["$modalInstance","columnDefs","filters","$scope",n])}(),function(){function n(){return{restrict:"AE",templateUrl:"rainModules/rainGrid/rainGridFilterInput/rainGridFilterInputTemplate.html",replace:!1,scope:{filter:"=",columns:"=",deleteFilter:"&"},controller:"rainGrid.filterInput.controller"}}angular.module("rainGrid").directive("rainGridFilter",[n])}(),function(){function n(n,e){function i(){r(),t(n.filter.col),l(),n.isBool=n.filter.col.isBoolean}function r(){for(var e=-1,i=0;i<n.columns.length;i++)if(n.columns[i].value===n.filter.col.value){e=i;break}n.filter.col=-1===e?{}:n.columns[e]}function t(i){if(n.constraints=e.getFilterConstraintsByColumnType(i),n.filter.constraint){for(var r=-1,t=0;t<n.constraints.length;t++)if(n.constraints[t].value===n.filter.constraint.value){r=t;break}n.filter.constraint=-1===r?{}:n.constraints[r]}n.isBool=n.filter.col.isBoolean}function l(){n.boolValues=[{label:"true",value:!0},{label:"false",value:!1}]}i(),n.columnChanged=t,n.removeFilter=function(e){n.deleteFilter({col:e})}}angular.module("rainGrid").controller("rainGrid.filterInput.controller",["$scope","rainGridService",n])}(),function(){function n(){function n(n,e,i){n.value=n.gridCell,(n.isLink||n.isButton||n.isIcon)&&(n.linkFunc=function(){n.funcLink()})}return{restrict:"AE",templateUrl:"rainModules/rainGrid/rainGridCell/rainGridCellTemplate.html",replace:!1,scope:{gridCell:"=",isDate:"=",isCurrency:"=",isNumber:"=",isCheckbox:"=",isLink:"=",isButton:"=",isIcon:"=",isHidden:"=",decimal:"=",funcLink:"&"},link:n}}angular.module("rainGrid").directive("gridCell",[n])}(),angular.module("rainFramework",["rainMenu"]),function(){function n(){return{transclude:!0,scope:{headerTitle:"@",headerSubTitle:"@",iconFile:"@",router:"@"},controller:"rainFramework.controller",templateUrl:"rainModules/rainFramework/rainFrameworkTemplate.html"}}angular.module("rainFramework").directive("rainFramework",n)}(),function(){function n(n,e,i,r,t,l){function a(){o(),i(function(){d()},0)}function o(){n.$on("rain-menu-item-selected-event",function(e,i){n.routeString=i.route,n.routeString&&u(n.routeString),d()}),n.$on("rain-menu-orientation-changed-event",function(e,i){n.isMenuVertical=i.isMenuVertical}),$(e).on("resize.rainFramework",function(){n.$apply(function(){d()})}),$(e).on("$destroy",function(){$(e).off("resize.rainFramework")}),n.menuButtonClicked=function(){n.isVerticalMenuVisible=!n.isVerticalMenuVisible;var i=Math.max(e.innerWidth,$(e).width());n.isMenuVertical=768>i,s()}}function s(){r.$broadcast("rain-menu-show",{show:n.isVerticalMenuVisible,isVertical:n.isMenuVertical,allowHorizontalMenu:!n.isMenuButtonVisible})}function c(){l.logout(),n.$emit("AUTHENTICATION_EVENT",{statusCode:401,eventSource:"rainFramework.controller.logout"})}function u(n){r.$broadcast("rain-change-route-event",{route:n})}function d(){var i=Math.max(e.innerWidth,$(e).width());n.isVerticalMenuVisible=i>=768,n.isMenuButtonVisible=!n.isVerticalMenuVisible,s()}n.isMenuButtonVisible=!0,n.isVerticalMenuVisible=!0,n.isMenuVertical=!0,n.routerName=n.router.trim().toUpperCase(),n.username=t.profile.username,n.logout=c,n.isFullWidth=function(){return!n.isMenuVertical||!n.isVerticalMenuVisible},a()}angular.module("rainFramework").controller("rainFramework.controller",["$scope","$window","$timeout","$rootScope","rainService.currentUser","rainService.oauth",n])}(),angular.module("rainMenu").run(["$templateCache",function(n){n.put("rainModules/rainMenu/rainMenuTemplate.html",'<div class="r-menu-area" ng-show="showMenu"\r\n     ng-class="{\'r-menu-area-horizontal\':!isVertical,\'r-menu-area-vertical\':isVertical}">\r\n    <ul class="r-menu">\r\n        <div ng-transclude ng-class="{\'r-menu-vertical\':isVertical,\'r-menu-horizontal\':!isVertical}"></div>\r\n        <a class="btn r-menu-layout-button" ng-click="toggleMenuOrientation()"\r\n                                            ng-show="allowHorizontalMenu"\r\n                                            ng-class="{\'r-menu-layout-button-horizontal\':!isVertical}">\r\n        <i class="fa" ng-class="{\' fa-chevron-up\':isVertical,\' fa-chevron-left\':!isVertical}"></i>\r\n    </a></ul>\r\n\r\n</div>'),n.put("rainModules/rainMenu/rainMenuGroup/rainMenuGroupTemplate.html",'<li class="r-selectable-item r-no-select" ng-click="clicked()"\r\n    ng-class="{\'r-menu-group-horizontal\':!isVertical(),\'isActiveGroup\':isActiveGroup()||isOpen}">\r\n    <div class="r-no-select group-title">\r\n        <i class="fa {{icon}} r-menu-icon"></i>\r\n        {{label}}\r\n    </div>\r\n    <i class="fa fa-angle-left  r-menu-group-indicator" ng-if="isVertical()"\r\n       ng-class="{\'fa-rotate-270\':isOpen}"></i>\r\n\r\n    <!--<div ng-show="isOpen" class="r-menu-sub-section r-menu-fade-in-animation" ng-class="{\'r-menu-popup\':!isVertical()}">-->\r\n    <div ng-show="isOpen" class="r-menu-sub-section animated fadeIn"\r\n         ng-class="{\'r-menu-popup\':!isVertical()}">\r\n        <ul ng-transclude></ul>\r\n    </div>\r\n</li>'),n.put("rainModules/rainMenu/rainMenuItem/rainMenuItemTemplate.html",'<li class="r-selectable-item r-no-select r-menu-item" ng-class="{\'r-menu-item-active\':isActive()}">\r\n    <div class="r-no-select">\r\n        <i class="fa {{icon}} r-menu-icon"></i>\r\n        {{label}}\r\n    </div>\r\n    <!--<i class="fa fa-2x fa-angle-left  r-menu-active-indicator" ng-if="isActive()"></i>-->\r\n</li>')}]),angular.module("rainGrid").run(["$templateCache",function(n){n.put("rainModules/rainGrid/_rainGridTemplate.html",'<div class="rain-grid-panel panel panel-success">\r\n    <div class="panel-heading">\r\n        <div class="clearfix">\r\n            <div class="pull-left" style="margin-top: 4px;">\r\n                <i class="fa fa-arrow-circle-up" style="font-size: 18px;" ng-show="sortOrder===\'ASC\'"></i>\r\n                <i class="fa fa-arrow-circle-down" style="font-size: 18px;" ng-show="sortOrder===\'DSC\'"></i>\r\n                <i class="fa fa-file-o " style="font-size: 18px;" ng-show="!sortOrder"></i>\r\n                <span style="margin-left: 5px;font-weight: bold;">{{title}}</span>\r\n                <span style="color: #F0CF23;font-weight: bold;">({{rowCount}})</span>\r\n            </div>\r\n            <div class="rain-page pull-right">\r\n                <div class="clearfix">\r\n\r\n                    <div class="pull-left" ng-if="showToolMenu">\r\n                        <div rain-grid-menu filter-data="filterData(filters)" grid-options="gridOptions"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="panel-body">\r\n        <table class="table table-striped table-bordered table-hover table-condensed rain-grid-table">\r\n            <tbody>\r\n            <tr>\r\n                <th ng-repeat="field in header" ng-click="sortingChanged(field.fieldName)"\r\n                    ng-class="{dsc:field.fieldName===sortField&&sortOrder===\'DSC\',\r\n                            asc:field.fieldName===sortField&&sortOrder===\'ASC\'}"\r\n                    ng-if="!field.isHidden">\r\n                    <span>\r\n                        {{field.displayName}}\r\n                    </span>\r\n                </th>\r\n            </tr>\r\n            <tr ng-repeat="row in list" ng-click="selectRow(row)" ng-class="{\'row-selected\':row.rowSelected}">\r\n                <td ng-repeat="field in row.rowData" ng-if="!field.isHidden">\r\n                    <div style="display: inline;" ng-class="{\'cell-center\':field.isButton}"\r\n                         grid-cell="field.value"\r\n                         is-date="field.isDate"\r\n                         is-checkbox="field.isCheckbox"\r\n                         is-currency="field.isCurrency"\r\n                         is-number="field.isNumber"\r\n                         is-link="field.isLink"\r\n                         is-button="field.isButton"\r\n                         is-icon="field.isIcon"\r\n                         is-hidden="field.isHidden"\r\n                         decimal="field.decimal"\r\n                         func-link="linkTo(row.rowData,field.linkFunc.funcEvent,field.linkFunc.funcIdField)">\r\n                        <!--{{field.value}}-->\r\n                    </div>\r\n                    <div class="pull-right fa fa-remove action-button"\r\n                         ng-if="showDeleteButton && field.order == actionButtonPlace" ng-click="deleteRecord(row)">\r\n                    </div>\r\n                    <div class="pull-right fa fa-pencil-square-o action-button"\r\n                         ng-if="showEditButton && field.order == actionButtonPlace" ng-click="editRecord(row)">\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="col-xs-12 rain-grid-pagination">\r\n            <!--<div class="clearfix cellphone page-count">\r\n                <div class="pull-left" style="margin: 5px 5px 5px 0;">\r\n                    <span style="margin-right: 5px;">Count:</span>\r\n                    <span style="color: #337AB7;font-weight: bold;">{{rowCount}}</span>\r\n                </div>\r\n            </div>-->\r\n            <div class="clearfix cellphone page-size" ng-show="enablePage">\r\n                <div class="pull-left" >\r\n                    <div class="clearfix">\r\n                        <div class="pull-left" style="margin: 5px 5px 0 0;">Page size:</div>\r\n                        <div class="pull-left">\r\n                            <select class="form-control input-sm" ng-model="pageSize" style=""\r\n                                    ng-change="pageSizeChanged(pageSize)"\r\n                                    ng-options="size as size.label for size in pageSizes">\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="clearfix" style="display: inline-block;height: 30px;">\r\n                <div class="pull-left" ng-show="enablePage">\r\n                    <pagination total-items="rowCount" ng-model="currentPage" max-size="maxSize"\r\n                                class="pagination-sm" boundary-links="true" rotate="false"\r\n                                first-text="<<" previous-text="<" next-text=">" last-text=">>"\r\n                                items-per-page="pageSize.value" ng-change="pageChanged()">\r\n                    </pagination>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n\r\n'),n.put("rainModules/rainGrid/rainGridCell/rainGridCellTemplate.html",'<div ng-if="isCheckbox" rain-checkbox="value" readonly="true" style="padding-right: 10px;"></div>\r\n\r\n<span ng-if="isLink">\r\n    <a ng-click="linkFunc()">{{value}}</a>\r\n</span>\r\n\r\n<div style="display: inline-block;" ng-if="isButton">\r\n    <a class="btn btn-primary btn-xs" ng-click="linkFunc()">{{value}}</a>\r\n</div>\r\n\r\n<div style="display: inline-block;" ng-if="isIcon">\r\n    <a class="btn btn-xs" style="font-size: 14px;" ng-click="linkFunc()">\r\n        <span class="{{value}}"></span>\r\n    </a>\r\n</div>\r\n\r\n<div class="clearfix" ng-if="isCurrency">\r\n    <div class="pull-right">\r\n        {{value|currency}}\r\n    </div>\r\n</div>\r\n\r\n<div class="clearfix" ng-if="isDate">\r\n    <div class="pull-right">\r\n        {{value|date: \'yyyy-MM-dd\'}}\r\n    </div>\r\n</div>\r\n\r\n<div class="clearfix" ng-if="isNumber">\r\n    <div class="pull-right">\r\n        <span ng-if="decimal==1">{{value|number:1}}</span>\r\n        <span ng-if="decimal==2">{{value|number:2}}</span>\r\n        <span ng-if="decimal==3">{{value|number:3}}</span>\r\n        <span ng-if="decimal==4">{{value|number:4}}</span>\r\n        <span ng-if="!decimal || decimal > 4">{{value}}</span>\r\n    </div>\r\n</div>\r\n\r\n<span ng-if="!isCheckbox && !isLink && !isButton && !isCurrency && !isNumber && !isDate && !isHidden && !isIcon">\r\n    {{value}}\r\n</span>\r\n\r\n'),n.put("rainModules/rainGrid/rainGridFilterInput/rainGridFilterInputTemplate.html",'<form name="formFilter" class="form-horizontal">\r\n    <div class="well well-sm">\r\n        <div class="row">\r\n            <div class="col-sm-12">\r\n                <div class="col-sm-4">\r\n                    <select class="form-control input-sm" ng-model="filter.col" ng-change="columnChanged(filter.col)"\r\n                            ng-options="colDef as colDef.label for colDef in columns">\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-4">\r\n                    <select class="form-control input-sm" ng-model="filter.constraint"\r\n                            ng-options="con as con.label for con in constraints">\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-3" ng-if="!isBool">\r\n                    <input type="text" class="form-control input-sm" ng-model="filter.expression">\r\n                </div>\r\n                <div class="col-sm-3" ng-if="isBool">\r\n                    <select class="form-control input-sm" ng-model="filter.expression"\r\n                            ng-options="bool.value as bool.label for bool in boolValues">\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-1" style="padding-top: 3px;">\r\n                    <button class="btn btn-warning btn-xs" ng-click="removeFilter(filter.col)">\r\n                        <i class="glyphicon glyphicon-minus"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n'),n.put("rainModules/rainGrid/rainGridFilterModal/rainGridFilterModalTemplate.html",'<div>\r\n    <div class="modal-header">\r\n        <div style="display:inline-block;margin-left: 10px;font-size: 16px;font-weight: bold;">Filters</div>\r\n        <div class="pull-right">\r\n            <button class="btn btn-sm btn-success" ng-click="addFilter()">\r\n                <i class="glyphicon glyphicon-plus "></i>Add filter\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div style="margin:10px;padding-right: 10px;">\r\n\r\n        <div>\r\n            <div ng-repeat="filter in filters">\r\n                <div rain-grid-filter filter="filter" columns="columns" delete-filter="deleteFilter(col)"></div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button class="btn btn-primary" ng-click="doFilter()">Filter</button>\r\n        <button class="btn btn-warning" ng-click="doCancel()">Cancel</button>\r\n    </div>\r\n</div>'),n.put("rainModules/rainGrid/rainGridMenu/rainGridMenuTemplate.html",'<div>\r\n    <div class="btn-group" dropdown is-open="status.isOpen" style="cursor: pointer;">\r\n        <i class="fa fa-cog  dropdown-toggle" style="font-size: 23px;margin-left: 10px;"\r\n           dropdown-toggle ng-disabled="disabled"></i>\r\n        <ul class="dropdown-menu" role="menu" style="left:auto;right: -12px;">\r\n            <li>\r\n                <a ng-click="doFilter()">\r\n                    <i class="glyphicon glyphicon-filter" style="margin-right: 5px;color: #337AB7;"></i>\r\n\r\n                    <div style="display: inline-block;">Filter</div>\r\n                </a>\r\n            </li>\r\n            <li ng-if="hasFiltered">\r\n                <a href="#" ng-click="removeFilters()">\r\n                    <i class="fa fa-times" style="margin-right: 5px;color: #337AB7;"></i>\r\n\r\n                    <div style="display: inline-block;">Remove Filters</div>\r\n                </a>\r\n            </li>\r\n            <li class="divider" style="border-width: 0;"></li>\r\n            <li>\r\n                <a>\r\n                    <i class="fa fa-file-excel-o" style="margin-right: 5px;color: green;"></i>\r\n                    <span>Export To Excel</span>\r\n                </a>\r\n            </li>\r\n            <li>\r\n                <a>\r\n                    <i class="fa fa-file-pdf-o" style="margin-right: 5px;color: red;"></i>\r\n                    <span>Export To PDF</span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n')}]),angular.module("rainFramework").run(["$templateCache",function(n){n.put("rainModules/rainFramework/rainFrameworkTemplate.html",'<div class=r-title-bar><div class=row><div class="r-logo-area col-xs-6"><img ng-src={{iconFile}} alt class=r-icon><div class=r-title-area><p class=r-logo-title>{{headerTitle}}</p><p class=r-logo-subtitle>{{headerSubTitle}}</p></div></div><div class="r-right-side-controls col-xs-5"><div style="text-align: right;"><div class="cellphone welcome">Welcome <strong>{{username}}!</strong></div><button class="btn btn-sm btn-default btn-hover-border" ng-click=logout()><i class="fa fa-sign-out"></i><span>Log out</span></button></div><div class=pull-right></div></div><div class=col-xs-1><div ng-if=isMenuButtonVisible class="r-collapsed-menu pull-right"><button class="btn r-nav-button" ng-click=menuButtonClicked()><i class="fa fa-bars"></i></button></div></div></div></div><div ng-transclude></div><div ng-switch=routerName class=rain-view ng-class="{\'rain-view-full-width\':isFullWidth()}"><div ng-switch-when=NGNEWROUTER><ng-viewport>{{routeString}}</ng-viewport></div><div ng-switch-when=UIROUTER><div ui-view></div></div><div ng-switch-default><div ng-view>{{routeString}}</div></div></div>')}]),function(){angular.module("rainService",[])}(),function(){function n(n,e){function i(i){return e(function(){return n.get(i.url).then(function(n){return n.data})},200)}function r(e,i){return n.get(e.url+"/"+i).then(function(n){return n.data})}function t(e,i){return n["delete"](e.url+"/"+i).then(function(n){return n.data})}function l(e,i){return n["delete"](e.url+"?"+i).then(function(n){return n.data})}function a(e,i){return n.post(e.url,i).then(function(n){return n.data})}return{getDataList:i,getDataById:r,deleteDataById:t,deleteDataByQueryString:l,addOrUpdateData:a}}var e=angular.module("rainService");e.factory("rainService.repository",["$http","$timeout",n])}(),function(){function n(n,i){function r(r,t,l){var a={header:{"Content-Type":"application/x-www-form-urlencoded"}},o=e({username:t,password:l,grant_type:"password"});return n.post(r,o,a).then(function(n){return i.setProfile(t,n.data.access_token),n},function(n){return n})}function t(){i.logout()}function l(n,e,i){var r="";return i&&(r="&role="+i.key.trim()),"username="+n.trim()+"&password="+e.trim()+r}function a(n){var e=o(n);return e}function o(n){var e,i,r,t,l={};for(e=n.split("&"),r=0,t=e.length;t>r;r++)i=e[r].split("="),l[i[0]]=i[1];return l}return{login:r,logout:t,token:{createToken:l,decryptToken:a}}}function e(n){var e=[];for(var i in n)e.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return e.join("&").replace(/%20/g,"+")}var i=angular.module("rainService");i.factory("rainService.oauth",["$http","rainService.currentUser",n])}(),function(){function n(n){function e(n,e){e=angular.toJson(e),t.setItem(n,e)}function i(n){var e=t.getItem(n);return e&&(e=angular.fromJson(e)),e}function r(n){t.removeItem(n)}var t=n.localStorage;return{add:e,get:i,remove:r}}angular.module("rainService").factory("rainService.localStorage",["$window",n])}(),function(){function n(n,e){var i=function(i){return e.profile.loggedIn&&(i.headers.Authorization="Bearer "+e.profile.token),n.when(i)};return{request:i}}function e(n,e,i){var r=function(r){return(401==r.status||403==r.status)&&e.$broadcast("AUTHENTICATION_EVENT",{statusCode:r.status,requestedPath:i.path(),eventSource:"rainService.loginRedirect.responseError"}),n.reject(r)};return{responseError:r}}var i=angular.module("rainService");i.factory("rainService.addToken",["$q","rainService.currentUser",n]),i.factory("rainService.loginRedirect",["$q","$rootScope","$location",e]),i.config(["$httpProvider",function(n){n.interceptors.push("rainService.addToken")}]),i.config(["$httpProvider",function(n){n.interceptors.push("rainService.loginRedirect")}])}(),function(){function n(n){function e(e,r,t){function l(n,e){n.ok=function(){t&&angular.isFunction(t)&&t(),e.close(!0)},n.cancel=function(){e.close(!1)}}e=e||"Confirm",r=r||"Are you sure?";var a=n.open({template:i(e,r),controller:["$scope","$modalInstance",l]});return a.result}function i(n,e){return'<div class="modal-header"><h3 class="modal-title">'+n+'</h3></div><div class="modal-body"><p style="font-size: 16px;">'+e+'</p></div><div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">Yes</button><button class="btn btn-warning" ng-click="cancel()">No</button></div>'}function r(e,i,r){function l(n,e){n.ok=function(){r&&angular.isFunction(r)&&r(),e.close(!0)}}e=e||"Information",i=i||"<p></p>";var a=n.open({template:t(e,i),controller:["$scope","$modalInstance",l]});return a.result}function t(n,e){return'<div class="modal-header"><h3 class="modal-title">'+n+'</h3></div><div class="modal-body">'+e+'</div><div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">Close</button></div>'}return{confirmModal:e,messageModal:r}}angular.module("rainService").factory("rainService.dialog",["$modal",n])}(),function(){function n(n){function e(e,i){l.username=e,l.token=i,n.add(t,l)}function i(){var e={username:"",token:"",get loggedIn(){return!!this.token}},i=n.get(t);return i&&(e.username=i.username,e.token=i.token),e}function r(){l.username="",l.token="",n.remove(t)}var t="tokenKey",l=i();return{setProfile:e,profile:l,logout:r}}angular.module("rainService").factory("rainService.currentUser",["rainService.localStorage",n])}(),function(){function n(){return{restrict:"EA",require:"ngModel",link:function(n,e,i,r){n.$watch(i.ngModel,function(n,e){if(n){var t=String(n).split("");if(0!==t.length&&(1!==t.length||"-"!=t[0]&&"."!==t[0])&&(2!==t.length||"-."!==n)){if(t.indexOf(".")>0){var l=i.numberOnly;["0","1","2","3","4","5"].indexOf(l)>=0&&(l=parseInt(l),t.length-t.indexOf(".")>l+1&&(r.$setViewValue(e),r.$render()))}isNaN(n)&&(r.$setViewValue(e),r.$render())}}})}}}var e=angular.module("rainNumberOnly",[]);e.directive("numberOnly",n)}(),function(){function n(n){function e(n,e,i){}return{restrict:"AE",transclude:!0,scope:{horizontalMenu:"="},controller:"rainMenu.controller",templateUrl:"rainModules/rainMenu/rainMenuTemplate.html",link:e}}angular.module("rainMenu").directive("rainMenu",["$timeout",n])}(),function(){function n(n,e){function i(e){r(e),t(),l&&n.toggleMenuOrientation()}function r(i){i.setActiveElement=function(e){n.activeElement=e},i.getActiveElement=function(){return n.activeElement},i.setActiveGroupElement=function(e){n.activeGroupElement=e},i.getActiveGroupElement=function(){return n.activeGroupElement},i.isVertical=function(){return n.isVertical},i.setOpenMenuScope=function(e){n.openMenuScope=e},i.closeCurrentMenu=function(){n.openMenuScope&&n.openMenuScope.closeMenu()},i.setRoute=function(n){n&&e.$broadcast("rain-menu-item-selected-event",{route:n})}}function t(){n.$on("rain-menu-show",function(e,i){n.showMenu=i.show,n.isVertical=i.isVertical,n.allowHorizontalMenu=i.allowHorizontalMenu}),n.toggleMenuOrientation=function(){n.isVertical=!n.isVertical,e.$broadcast("rain-menu-orientation-changed-event",{isMenuVertical:n.isVertical})},angular.element(document).bind("click",function(e){if(n.openMenuScope&&!n.isVertical){if($(e.target).parent().hasClass("r-selectable-item"))return;n.$apply(function(){n.openMenuScope.closeMenu()}),e.preventDefault(),e.stopPropagation()}})}var l=n.horizontalMenu;n.showMenu=!0,n.isVertical=!0,n.openMenuScope=null,n.allowHorizontalMenu=!0;var a=this;i(a)}angular.module("rainMenu").controller("rainMenu.controller",["$scope","$rootScope",n])}(),function(){function n(){return{restrict:"AE",templateUrl:"rainModules/rainGrid/_rainGridTemplate.html",replace:!1,scope:{rainGrid:"="},controller:"rainGrid.controller"}}angular.module("rainGrid").directive("rainGrid",[n])}(),function(){function n(n,e,i){function r(){t(),n.gridOptions.data.then(function(n){l(n)})}function t(){n.gridOptions={enablePage:!0,pageSize:10,selectable:!1,showToolMenu:!0},n.gridOptions=_.assign(n.gridOptions,n.rainGrid),n.selectable=n.gridOptions.selectable,n.actionButtonPlace=0,n.showToolMenu=n.gridOptions.showToolMenu,n.title=n.gridOptions.title,a()}function l(e){n.gridOptions.dataList=e,n.gridData=u(n.gridOptions),o(),s(n.gridData),i.modifyPaginationIcons()}function a(){if(n.gridOptions.deleteLink&&n.gridOptions.deleteLink.enable){if(n.showDeleteButton=!0,n.gridOptions.deleteLink.place)n.actionButtonPlace=n.gridOptions.deleteLink.place;else for(var e=0;e<n.gridOptions.columnDefs.length;e++)if(!n.gridOptions.columnDefs[e].isHidden){n.actionButtonPlace=e;break}n.deleteEvent=n.gridOptions.deleteLink.funcEvent,n.deleteEventIdField=n.gridOptions.deleteLink.funcIdField}if(n.gridOptions.editLink&&n.gridOptions.editLink.enable){if(n.showEditButton=!0,n.gridOptions.editLink.place)n.actionButtonPlace=n.gridOptions.editLink.place;else for(var i=0;i<n.gridOptions.columnDefs.length;i++)if(!n.gridOptions.columnDefs[i].isHidden){n.actionButtonPlace=i;break}n.editEvent=n.gridOptions.editLink.funcEvent,n.editEventIdField=n.gridOptions.editLink.funcIdField}}function o(){if(n.enablePage=n.gridOptions.enablePage,n.currentPage=1,n.maxSize=2,n.pageSizes=[{label:" 5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20}],n.pageSize=n.pageSizes[1],n.gridOptions.pageSize){var e=_.find(n.pageSizes,function(e){return e.value==n.gridOptions.pageSize});e&&(n.pageSize=e)}}function s(e){n.currentPage=1,g=0,v=null,d=e.rows,n.header=e.header,n.rowCount=d.length,n.enablePage=n.gridOptions.enablePage&&n.rowCount>n.pageSizes[0].value,f=d,c(f)}function c(e){if(!n.enablePage)return n.list=e,n.list;var r=i.getDataListByPage(e,n.currentPage,n.pageSize.value);return r&&(n.list=r,angular.forEach(n.list,function(e){e.rowSelected&&e!=n.selectedRow&&(e.rowSelected=!1)})),n.list}function u(e){var r=i.buildGridData(e);return r.rows.length>0&&r.rows[0].rowSelected&&(n.selectedRow=r.rows[0]),r}n.gridOptions={};var d=[],f=[],p=[null,"ASC","DSC"],g=0,v=null,m=!1,h=[];n.$watch("rainGrid.data",function(){r()}),r(),n.filterData=function(e){f=i.filterData(d,e),m=e.length>0&&!!e[0].col,m&&(h=f),n.rowCount=f.length,n.enablePage=n.gridOptions.enablePage&&n.rowCount>n.pageSizes[0].value,n.sortField=null,n.sortOrder=null,n.currentPage=1,c(f)},n.linkTo=function(n,i,r){var t=_.find(n,function(n){return n.fieldName===r});if(t){var l=t.value;e.$broadcast(i,{id:l})}},n.pageSizeChanged=function(e){n.currentPage=1,c(f)},n.pageChanged=function(){c(f)},n.sortingChanged=function(e){v!==e?g=1:(g+=1,g>2&&(g=0)),v=e,n.sortField=e,n.sortOrder=p[g];var r=m?h:d;f=i.sortData(r,p,v,g),c(f)},n.selectRow=function(i){if(n.selectable){var r=i.rowSelected;if(angular.forEach(n.list,function(n){n.rowSelected=!1}),i.rowSelected=!r,i.rowSelected&&(n.selectedRow=i),i.rowSelected&&n.gridOptions.rowSelectedEvent){var t=n.gridOptions.rowSelectedEvent.funcEvent;e.$broadcast(t,{id:i.id})}}},n.deleteRecord=function(i){if(n.deleteEvent&&n.deleteEventIdField){var r=_.find(i.rowData,function(e){return e.fieldName==n.deleteEventIdField});if(r){var t=r.value;e.$broadcast(n.deleteEvent,{id:t})}}},n.editRecord=function(i){if(n.editEvent&&n.editEventIdField){var r=_.find(i.rowData,function(e){return e.fieldName==n.editEventIdField});if(r){var t=r.value;e.$broadcast(n.editEvent,{id:t})}}}}angular.module("rainGrid").controller("rainGrid.controller",n),n.$inject=["$scope","$rootScope","rainGridService"]}(),function(){function n(n,e,i){function r(e,i){var r=_.find(e.row,function(n){return n.fieldName===e.funcIdField});if(r){var t=r.value,l=e.funcName+"("+t+")",a=n(l);a(i)}}function t(n,e,i){if(!n||0>=e)return null;try{var r=(e-1)*i,t=_.slice(n,r,r+i);return t?t:null}catch(l){return console.log(l.message),null}}function l(n){var e=[];return angular.forEach(n,function(n){e.push({fieldName:n.field,displayName:n.displayName,isHidden:n.isHidden})}),e}function a(n){var e=n.dataList,i=n.columnDefs,r=null,t=null,a={rows:[],header:l(i)};return 0==e.length?a:(a.rows=_.map(e,function(e){var l=[];if(i){r=n.idField,r&&(t=e[n.idField]);for(var a=0;a<i.length;a++){var o=i[a];l.push({id:e[n.idField],fieldName:o.field,value:e[o.field]||o.field,displayName:o.displayName,isCheckbox:o.isCheckbox,isCurrency:o.isCurrency,
isNumber:o.isNumber,decimal:o.decimal,isLink:o.isLink,isButton:o.isButton,isIcon:o.isIcon,isDate:o.isDate,isHidden:o.isHidden||!1,linkFunc:o.linkFunc||{funcName:"",funcIdField:""},order:a})}}else for(var s in e)e.hasOwnProperty(s)&&l.push({fieldName:s,value:e[s],displayName:s});return{rowData:l,rowSelected:!1,idField:r,id:t}}),n.selectFirstRow&&a.rows.length>0&&(a.rows[0].rowSelected=!0),a)}function o(n,e,i,r){var t=e[r];if(!i||!t)return n;var l=_.sortBy(n,function(n){for(var e=n.rowData,r=null,t=0;t<e.length;t++)if(e[t].fieldName===i)return r=e[t].value});return t===e[1]?l:l.reverse()}function s(){$('ul.pagination a:contains("<<"):first').html("<i class='fa fa-angle-double-left page-arrow'></i>"),$('ul.pagination a:contains(">>"):first').html("<i class='fa fa-angle-double-right page-arrow'></i>"),$('ul.pagination a:contains("<"):first').html("<i class='fa fa-angle-left page-arrow'></i>"),$('ul.pagination a:contains(">"):first').html("<i class='fa fa-angle-right page-arrow'></i>")}function c(n,i){var r=e.open({templateUrl:f+"rainGridFilterModal/rainGridFilterModalTemplate.html",controller:"rainGrid.filterModal.controller",resolve:{columnDefs:function(){return n.columnDefs},filters:function(){return i}}});return r.result}function u(n){var e=[],i="text";switch(n.isNumber||n.isCurrency?i="number":n.isBoolean?i="bool":n.isDate&&(i="date"),i){case"number":e=[{label:"equal to",value:"equalTo"},{label:"greater than",value:"greaterThan"},{label:"less than",value:"lessThan"}];break;case"bool":e=[{label:"equal to",value:"equalTo"}];break;case"date":e=[{label:"equal to",value:"equalTo"},{label:"greater than",value:"greaterThan"},{label:"less than",value:"lessThan"}];break;default:e=[{label:"equal to",value:"equalTo"},{label:"greater than",value:"greaterThan"},{label:"less than",value:"lessThan"},{label:"contains",value:"contains"},{label:"starts with",value:"startsWith"}]}return e}function d(n,e){var i=[];return i=0!==e.length&&e[0].col?_.filter(n,function(n){for(var i=n.rowData,r=!0,t=0;t<i.length;t++){for(var l=i[t],a=0;a<e.length;a++){var o=e[a],s=o.col.value,c=o.constraint.value,u=o.expression;if(l.fieldName===s){switch(c){case"equalTo":r=r&&l.value==u;break;case"greaterThan":r=r&&l.value>u;break;case"lessThan":r=r&&l.value<u;break;case"contains":r=r&&l.value.indexOf(u)>=0;break;case"startsWith":r=r&&0===l.value.indexOf(u)}if(!r)break}}if(!r)break}return r}):n}var f=i.baseUrl;return{baseUrl:f,rainGridLinkFunc:r,modifyPaginationIcons:s,getDataListByPage:t,buildGridData:a,sortData:o,showFilterModal:c,getFilterConstraintsByColumnType:u,filterData:d}}angular.module("rainGrid").factory("rainGridService",["$parse","$modal","rainGridConfig",n])}(),function(){angular.module("rainForm",[])}(),function(){function n(n){return{restrict:"A",require:"^form",link:l(n)}}var e=angular.module("rainForm");e.directive("formInput",n),n.$inject=["$compile"];var i=function(n,e){return function(){return e&&n[e]?n.$submitted?n[e].$invalid:n[e].$dirty?n[e].$invalid:!1:void 0}},r=function(n){return function(e){e?(n.addClass("has-error"),n.find(".help-block").show()):(n.removeClass("has-error"),n.find(".help-block").hide())}},t=function(n,e,i){if(n.hasClass("form-group")||0!==n.find(".form-group").length)n.addClass("form-group-sm");else{var r=n.html(),t='<div class="form-group form-group-sm">'+r+"</div>";n.html(e(t)(i))}var l=n[0].querySelector("label");l&&l.classList.add("control-label");var a=n[0].querySelector("input, textarea, select,[ng-model]");if(a){var o=a.getAttribute("type"),s=a.getAttribute("name");return"checkbox"!==o&&"radio"!==o&&a.classList.add("form-control"),s}},l=function(n){return function(e,l,a,o){var s=t(l,n,e);e.$watch(i(o,s),r(l))}}}(),function(){function n(){return{restrict:"AE",template:r(),replace:!1,scope:{rainCheckbox:"=",text:"@",readonly:"=",onChanging:"&"},controller:["$scope",e],link:i}}function e(n){n.onclick=function(){n.readonly!==!0&&(n.rainCheckbox=!n.rainCheckbox,n.onChanging())}}function i(n,e){function i(){var i=e.find("input:checkbox+label");n.readonly===!0?i.addClass("readonly"):i.removeClass("readonly")}i(),n.$watch("readonly",function(){i()})}function r(){return'<div class="rain-checkbox-container"><div class="checkbox-image"><div  class="rain-checkbox"><input type="checkbox" ng-model="rainCheckbox" style="display: inline;"/><label class="checkbox-label" ng-click="onclick()"></label></div></div><div class="checkbox-text">{{text}}</div></div>'}var t=angular.module("rainCheckbox",[]);t.directive("rainCheckbox",[n])}();