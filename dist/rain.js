var rain;!function(e){var i;!function(e){var i;!function(e){function i(e){return new n(e)}var n=function(){function e(e){this.$timeout=e,this.restrict="AE",this.transclude=!0,this.scope={horizontalMenu:"="},this.controller="rainMenu.controller",this.templateUrl="rainModules/rainMenu/rainMenuTemplate.html",this.link=function(e,i){}}return e}();i.$inject=["$timeout"],angular.module("rainMenu",[]).directive("rainMenu",i)}(i=e.directive||(e.directive={}))}(i=e.menu||(e.menu={}))}(rain||(rain={}));var rain;!function(e){var i;!function(e){var i=function(){function e(){this.restrict="AE",this.require="^rainMenu",this.transclude=!0,this.scope={label:"@",icon:"@",route:"@"},this.templateUrl="rainModules/rainMenu/rainMenuItem/rainMenuItemTemplate.html",this.link=function(e,i,n,t){e.isActive=function(){return i===t.getActiveElement()},e.isVertical=function(){return t.isVertical()},i.on("click",function(n){n.stopPropagation(),n.preventDefault(),e.$apply(function(){t.setActiveElement(i),t.setRoute(e.route),e.isVertical()||t.closeCurrentMenu()})})}}return e.instance=function(){return new e},e}();angular.module("rainMenu").directive("rainMenuItem",i.instance)}(i=e.menuItem||(e.menuItem={}))}(rain||(rain={}));var rain;!function(e){var i;!function(e){var i=function(){function e(){this.restrict="AE",this.require="^rainMenu",this.transclude=!0,this.scope={label:"@",icon:"@",route:"@"},this.templateUrl="rainModules/rainMenu/rainMenuGroup/rainMenuGroupTemplate.html",this.link=function(e,i,n,t){function r(){var e=i.offset(),n=i.find(".r-menu-group-horizontal"),t=40;n&&(t=n.height()),i.find(".r-menu-sub-section").css({left:e.left+2,top:t+6})}e.isOpen=!1,e.closeMenu=function(){e.isOpen=!1},e.isActiveGroup=function(){return i===t.getActiveGroupElement()},e.clicked=function(){e.route&&t.setRoute(e.route),e.isOpen||t.closeCurrentMenu(),e.isOpen=!e.isOpen,e.isVertical()||r(),t.setOpenMenuScope(e)},e.isVertical=function(){return t.isVertical()},i.on("click",function(n){n.stopPropagation(),n.preventDefault(),e.$apply(function(){t.setActiveGroupElement(i),t.setRoute(e.route)})})}}return e.instance=function(){return new e},e}();angular.module("rainMenu").directive("rainMenuGroup",i.instance)}(i=e.menuGroup||(e.menuGroup={}))}(rain||(rain={})),function(){angular.module("rainGrid",[])}(),function(){function e(){return{restrict:"AE",templateUrl:"rainModules/rainGrid/rainGridMenu/rainGridMenuTemplate.html",replace:!1,scope:{filterData:"&",gridOptions:"="},controller:"rainGrid.menu.controller"}}angular.module("rainGrid").directive("rainGridMenu",[e])}(),function(){function e(e,i){function n(){r(),e.filters=[{col:{},constraint:{},expression:""}],t()}function t(){if(0===e.filters.length)e.hasFiltered=!1;else{var i=e.filters[0];e.hasFiltered=!!i.col&&!!i.constraint&&void 0!==i.expression&&""!==i.expression}}function r(){e.status={isOpen:!1},e.toggled=function(e){console.log("Dropdown is now: ",e)},e.toggleDropdown=function(i){i.preventDefault(),i.stopPropagation(),e.status.isOpen=!e.status.isOpen}}n(),e.doFilter=function(){var n=i.showFilterModal(e.gridOptions,e.filters);n.then(function(i){i.isCancel||(e.filters=i.filters,t(),e.filterData({filters:e.filters}))})},e.removeFilters=function(){e.filters=[{col:{},constraint:{},expression:""}],t(),e.filterData({filters:e.filters})}}angular.module("rainGrid").controller("rainGrid.menu.controller",["$scope","rainGridService",e])}();var RainGrid;!function(e){function i(){return new n}var n=function(){function e(){this.restrict="AE",this.templateUrl="rainModules/rainGrid/rainGridMenu/rainGridMenuTemplate.html",this.replace=!1,this.scope={filterData:"&",gridOptions:"="},this.controller="rainGrid.menu.controller",this.controllerAs="vm"}return e}();angular.module("rainGrid").directive("rainGridMenu",i);var t=function(){function e(e,i){this.$scope=e,this.rainGridService=i,e.filters=[{col:{},constraint:{},expression:""}],this.menuConfig(),this.verifyFilterStatus()}return e.prototype.verifyFilterStatus=function(){if(this.$scope.filters&&0!==this.$scope.filters.length){var e=this.$scope.filters[0];this.$scope.hasFiltered=!!e.col&&!!e.constraint&&void 0!==e.expression&&""!==e.expression}else this.$scope.hasFiltered=!1},e.prototype.doFilter=function(){var e=this,i=this.rainGridService.showFilterModal(this.$scope.gridOptions,this.$scope.filters);i.then(function(i){i.isCancel||(e.$scope.filters=i.filters,e.verifyFilterStatus(),e.$scope.filterData({filters:e.$scope.filters}))})},e.prototype.removeFilters=function(){this.$scope.filters=null,this.verifyFilterStatus(),this.$scope.filterData({filters:this.$scope.filters})},e.prototype.menuConfig=function(){this.$scope.status={isOpen:!1},this.$scope.toggled=function(e){console.log("Dropdown is now: ",e)},this.$scope.toggleDropdown=function(e){e.preventDefault(),e.stopPropagation(),this.$scope.status.isOpen=!this.$scope.status.isOpen}},e.$inject=["$scope","rainGridService"],e}();angular.module("rainGrid").controller("rainGrid.menu.controller",t)}(RainGrid||(RainGrid={})),function(){function e(e,i,n,t){function r(){t.filters.push({col:{},constraint:{},expression:""})}function o(e){_.remove(t.filters,function(i){return i.col.value===e.value}),0===t.filters.length&&t.filters.push({col:{},constraint:{},expression:""})}function a(){l(),e.close({filters:t.filters,isCancel:!1})}function s(){l(),e.close({filters:t.filters,isCancel:!0})}function l(){_.remove(t.filters,function(e){return!e.col||!e.constraint||void 0===e.expression||""===e.expression}),0===t.filters.length&&t.filters.push({col:{},constraint:{},expression:""})}t.columns=_.map(i,function(e){return{label:e.displayName,value:e.field,isNumber:e.isNumber,isCurrency:e.isCurrency,isBoolean:e.isBoolean||e.isCheckbox,isDate:e.isDate}}),t.filters=n,t.addFilter=r,t.deleteFilter=o,t.doFilter=a,t.doCancel=s}angular.module("rainGrid").controller("rainGrid.filterModal.controller",["$modalInstance","columnDefs","filters","$scope",e])}();var RainGrid;!function(e){var i=function(){function e(e,i,n,t){this.$modalInstance=e,this.columnDefs=i,this.filters=n,this.columns=_.map(this.columnDefs,function(e){return{label:e.displayName,value:e.field,isNumber:e.isNumber,isCurrency:e.isCurrency,isBoolean:e.isBoolean||e.isCheckbox,isDate:e.isDate}})}return e.prototype.addFilter=function(){this.filters.push({col:{},constraint:{},expression:""})},e.prototype.deleteFilter=function(e){_.remove(this.filters,function(i){return i.col.value===e.value}),0===this.filters.length&&this.filters.push({col:{},constraint:{},expression:""})},e.prototype.doFilter=function(){this.cleanFilters(),this.$modalInstance.close({filters:this.filters,isCancel:!1})},e.prototype.doCancel=function(){this.cleanFilters(),this.$modalInstance.close({filters:this.filters,isCancel:!0})},e.prototype.cleanFilters=function(){_.remove(this.filters,function(e){return!e.col||!e.constraint||void 0===e.expression||""===e.expression}),0===this.filters.length&&this.filters.push({col:{},constraint:{},expression:""})},e.$inject=["$modalInstance","columnDefs","filters","$scope"],e}();angular.module("rainGrid").controller("rainGrid.filterModal.controller",i)}(RainGrid||(RainGrid={})),function(){function e(){return{restrict:"AE",templateUrl:"rainModules/rainGrid/rainGridFilterInput/rainGridFilterInputTemplate.html",replace:!1,scope:{filter:"=",columns:"=",deleteFilter:"&"},controller:"rainGrid.filterInput.controller"}}angular.module("rainGrid").directive("rainGridFilter",[e])}(),function(){function e(e,i){function n(){t(),r(e.filter.col),o(),e.isBool=e.filter.col.isBoolean}function t(){for(var i=-1,n=0;n<e.columns.length;n++)if(e.columns[n].value===e.filter.col.value){i=n;break}e.filter.col=-1===i?{}:e.columns[i]}function r(n){if(e.constraints=i.getFilterConstraintsByColumnType(n),e.filter.constraint){for(var t=-1,r=0;r<e.constraints.length;r++)if(e.constraints[r].value===e.filter.constraint.value){t=r;break}e.filter.constraint=-1===t?{}:e.constraints[t]}e.isBool=e.filter.col.isBoolean}function o(){e.boolValues=[{label:"true",value:!0},{label:"false",value:!1}]}n(),e.columnChanged=r,e.removeFilter=function(i){e.deleteFilter({col:i})}}angular.module("rainGrid").controller("rainGrid.filterInput.controller",["$scope","rainGridService",e])}();var RainGrid;!function(e){function i(){return new n}var n=function(){function e(){this.restrict="AE",this.templateUrl="rainModules/rainGrid/rainGridFilterInput/rainGridFilterInputTemplate.html",this.replace=!1,this.scope={filter:"=",columns:"=",deleteFilter:"&"},this.controller="rainGrid.filterInput.controller",this.controllerAs="vm"}return e}();angular.module("rainGrid").directive("rainGridFilter",i);var t=function(){function e(e,i){this.$scope=e,this.rainGridService=i,this.removeFilter=function(e){this.$scope.deleteFilter({col:e})},this.filter=e.filter,this.columns=e.columns,this.getFilterColumn(),this.setConstraints(e.filter.col),this.buildBoolValues(),this.isBool=e.filter.col.isBoolean}return e.prototype.getFilterColumn=function(){for(var e=-1,i=0;i<this.columns.length;i++)if(this.columns[i].value===this.filter.col.value){e=i;break}this.filter.col=-1===e?{}:this.columns[e]},e.prototype.columnChanged=function(e){this.setConstraints(e)},e.prototype.setConstraints=function(e){if(this.constraints=this.rainGridService.getFilterConstraintsByColumnType(e),this.filter.constraint){for(var i=-1,n=0;n<this.constraints.length;n++)if(this.constraints[n].value===this.filter.constraint.value){i=n;break}this.filter.constraint=-1===i?{}:this.constraints[i]}this.isBool=this.filter.col.isBoolean},e.prototype.buildBoolValues=function(){this.boolValues=[{label:"true",value:!0},{label:"false",value:!1}]},e.$inject=["$scope","rainGridService"],e}();angular.module("rainGrid").controller("rainGrid.filterInput.controller",t)}(RainGrid||(RainGrid={})),function(){function e(){function e(e,i,n){e.value=e.gridCell,(e.isLink||e.isButton||e.isIcon)&&(e.linkFunc=function(){e.funcLink()})}return{restrict:"AE",templateUrl:"rainModules/rainGrid/rainGridCell/rainGridCellTemplate.html",replace:!1,scope:{gridCell:"=",isDate:"=",isCurrency:"=",isNumber:"=",isCheckbox:"=",isLink:"=",isButton:"=",isIcon:"=",isHidden:"=",decimal:"=",funcLink:"&"},link:e}}angular.module("rainGrid").directive("gridCell",[e])}();var RainGrid;!function(e){function i(){return new n}var n=function(){function e(){this.restrict="AE",this.templateUrl="rainModules/rainGrid/rainGridCell/rainGridCellTemplate.html",this.replace=!1,this.scope={gridCell:"=",isDate:"=",isCurrency:"=",isNumber:"=",isCheckbox:"=",isLink:"=",isButton:"=",isIcon:"=",isHidden:"=",decimal:"=",funcLink:"&"},this.link=function(e,i,n){e.value=e.gridCell,(e.isLink||e.isButton||e.isIcon)&&(e.linkFunc=function(){e.funcLink()})}}return e}();angular.module("rainGrid").directive("gridCell",i)}(RainGrid||(RainGrid={})),angular.module("rainMenu").run(["$templateCache",function(e){e.put("rainModules/rainMenu/rainMenuTemplate.html",'<div class="r-menu-area animated fadeInLeft animation-half-second" ng-show="showMenu"\r\n     ng-class="{\'r-menu-area-horizontal\':!isVertical,\'r-menu-area-vertical\':isVertical,\r\n     \'r-menu-area-float\':isFloatVerticalMenu}">\r\n    <ul class="r-menu">\r\n        <div ng-transclude ng-class="{\'r-menu-vertical\':isVertical,\'r-menu-horizontal\':!isVertical}"></div>\r\n        <div class="r-menu-horizontal" ng-class="{\'pull-right\':isVertical}">\r\n            <a class="btn r-menu-layout-button" ng-click="toggleMenuOrientation()"\r\n               ng-show="allowHorizontalMenu"\r\n               ng-class="{\'r-menu-layout-button-horizontal\':!isVertical}">\r\n                <i class="fa" ng-class="{\'fa-chevron-up\':isVertical,\' fa-chevron-left\':!isVertical}"></i>\r\n            </a>\r\n        </div>\r\n    </ul>\r\n\r\n</div>'),e.put("rainModules/rainMenu/rainMenuGroup/rainMenuGroupTemplate.html",'<li class="r-selectable-item r-no-select" ng-click="clicked()"\r\n    ng-class="{\'r-menu-group-horizontal\':!isVertical(),\'isActiveGroup\':isActiveGroup()||isOpen}">\r\n    <div class="r-no-select group-title">\r\n        <i class="fa {{icon}} r-menu-icon"></i>\r\n        {{label}}\r\n    </div>\r\n    <i class="fa fa-angle-left  r-menu-group-indicator" ng-if="isVertical()"\r\n       ng-class="{\'fa-rotate-270\':isOpen}"></i>\r\n\r\n    <!--<div ng-show="isOpen" class="r-menu-sub-section r-menu-fade-in-animation" ng-class="{\'r-menu-popup\':!isVertical()}">-->\r\n    <div ng-show="isOpen" class="r-menu-sub-section animated fadeIn"\r\n         ng-class="{\'r-menu-popup\':!isVertical()}">\r\n        <ul ng-transclude></ul>\r\n    </div>\r\n</li>'),e.put("rainModules/rainMenu/rainMenuItem/rainMenuItemTemplate.html",'<li class="r-selectable-item r-no-select r-menu-item" ng-class="{\'r-menu-item-active\':isActive()}">\r\n    <div class="r-no-select">\r\n        <i class="fa {{icon}} r-menu-icon"></i>\r\n        {{label}}\r\n    </div>\r\n    <!--<i class="fa fa-2x fa-angle-left  r-menu-active-indicator" ng-if="isActive()"></i>-->\r\n</li>')}]),angular.module("rainGrid").run(["$templateCache",function(e){e.put("rainModules/rainGrid/_rainGridTemplate.html",'<div class="rain-grid-panel panel panel-success">\r\n    <div class="panel-heading">\r\n        <div class="clearfix">\r\n            <div class="pull-left" style="margin-top: 4px;">\r\n                <i class="fa fa-arrow-circle-up" style="font-size: 18px;" ng-show="sortOrder===\'ASC\'"></i>\r\n                <i class="fa fa-arrow-circle-down" style="font-size: 18px;" ng-show="sortOrder===\'DSC\'"></i>\r\n                <i class="fa fa-file-o " style="font-size: 18px;" ng-show="!sortOrder"></i>\r\n                <span style="margin-left: 5px;font-weight: bold;">{{title}}</span>\r\n                <span style="color: #F0CF23;font-weight: bold;">({{rowCount}})</span>\r\n            </div>\r\n            <div class="rain-page pull-right">\r\n                <div class="clearfix">\r\n\r\n                    <div class="pull-left" ng-if="showToolMenu">\r\n                        <div rain-grid-menu filter-data="vm.filterData(filters)" grid-options="gridOptions"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="panel-body">\r\n        <table class="table table-striped table-bordered table-hover table-condensed rain-grid-table">\r\n            <tbody>\r\n            <tr>\r\n                <th ng-repeat="field in header" ng-click="vm.sortingChanged(field.fieldName)"\r\n                    ng-class="{dsc:field.fieldName===sortField&&sortOrder===\'DSC\',\r\n                            asc:field.fieldName===sortField&&sortOrder===\'ASC\'}"\r\n                    ng-if="!field.isHidden">\r\n                    <span>\r\n                        {{field.displayName}}\r\n                    </span>\r\n                </th>\r\n            </tr>\r\n            <tr ng-repeat="row in list" ng-click="vm.selectRow(row)" ng-class="{\'row-selected\':row.rowSelected}">\r\n                <td ng-repeat="field in row.fields" ng-if="!field.isHidden">\r\n                    <div>\r\n                        <div style="display: inline;" ng-class="{\'cell-center\':field.isButton}"\r\n                             grid-cell="field.value"\r\n                             is-date="field.isDate"\r\n                             is-checkbox="field.isCheckbox"\r\n                             is-currency="field.isCurrency"\r\n                             is-number="field.isNumber"\r\n                             is-link="field.isLink"\r\n                             is-button="field.isButton"\r\n                             is-icon="field.isIcon"\r\n                             is-hidden="field.isHidden"\r\n                             decimal="field.decimal"\r\n                             func-link="vm.linkTo(row.fields,field.linkFunc.funcEvent,field.linkFunc.funcIdField)">\r\n                            <!--{{field.value}}-->\r\n                        </div>\r\n                        <div class="pull-right fa fa-remove action-button" style="margin: 0;"\r\n                             ng-if="showDeleteButton && field.order == actionButtonPlace" ng-click="vm.deleteRecord(row)">\r\n                        </div>\r\n                        <div class="pull-right fa fa-pencil-square-o action-button" style="margin: 0;"\r\n                             ng-if="showEditButton && field.order == actionButtonPlace" ng-click="vm.editRecord(row)">\r\n                        </div>\r\n                    </div>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div class="col-xs-12 rain-grid-pagination">\r\n            <!--<div class="clearfix cellphone page-count">\r\n                <div class="pull-left" style="margin: 5px 5px 5px 0;">\r\n                    <span style="margin-right: 5px;">Count:</span>\r\n                    <span style="color: #337AB7;font-weight: bold;">{{rowCount}}</span>\r\n                </div>\r\n            </div>-->\r\n            <div class="clearfix cellphone-hide page-size" ng-show="enablePage">\r\n                <div class="pull-left">\r\n                    <div class="clearfix">\r\n                        <div class="pull-left" style="margin: 5px 5px 0 0;">Page size:</div>\r\n                        <div class="pull-left">\r\n                            <select class="form-control input-sm" ng-model="pageSize" style=""\r\n                                    ng-change="vm.pageSizeChanged(pageSize)"\r\n                                    ng-options="size as size.label for size in pageSizes">\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="clearfix" style="display: inline-block;height: 30px;">\r\n                <div class="pull-left" ng-show="enablePage">\r\n                    <pagination total-items="rowCount" ng-model="currentPage" max-size="maxSize"\r\n                                class="pagination-sm" boundary-links="true" rotate="false"\r\n                                first-text="<<" previous-text="<" next-text=">" last-text=">>"\r\n                                items-per-page="pageSize.value" ng-change="vm.pageChanged()">\r\n                    </pagination>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n\r\n'),e.put("rainModules/rainGrid/rainGridCell/rainGridCellTemplate.html",'<div ng-if="isCheckbox" rain-checkbox="value" readonly="true" style="padding-right: 10px;"></div>\r\n\r\n<span ng-if="isLink">\r\n    <a ng-click="linkFunc()">{{value}}</a>\r\n</span>\r\n\r\n<div style="display: inline-block;" ng-if="isButton">\r\n    <a class="btn btn-primary btn-xs" ng-click="linkFunc()">{{value}}</a>\r\n</div>\r\n\r\n<div style="display: inline-block;" ng-if="isIcon">\r\n    <a class="btn btn-xs" style="font-size: 14px;" ng-click="linkFunc()">\r\n        <span class="{{value}}"></span>\r\n    </a>\r\n</div>\r\n\r\n<div class="clearfix" ng-if="isCurrency">\r\n    <div class="pull-right">\r\n        {{value|currency}}\r\n    </div>\r\n</div>\r\n\r\n<div class="clearfix" ng-if="isDate">\r\n    <div class="pull-right">\r\n        {{value|date: \'yyyy-MM-dd\'}}\r\n    </div>\r\n</div>\r\n\r\n<div class="clearfix" ng-if="isNumber">\r\n    <div class="pull-right">\r\n        <span ng-if="decimal==1">{{value|number:1}}</span>\r\n        <span ng-if="decimal==2">{{value|number:2}}</span>\r\n        <span ng-if="decimal==3">{{value|number:3}}</span>\r\n        <span ng-if="decimal==4">{{value|number:4}}</span>\r\n        <span ng-if="!decimal || decimal > 4">{{value}}</span>\r\n    </div>\r\n</div>\r\n\r\n<span ng-if="!isCheckbox && !isLink && !isButton && !isCurrency && !isNumber && !isDate && !isHidden && !isIcon">\r\n    {{value}}\r\n</span>\r\n\r\n'),e.put("rainModules/rainGrid/rainGridFilterInput/rainGridFilterInputTemplate.html",'<form name="formFilter" class="form-horizontal rain-grid-filter">\r\n    <div class="well well-sm">\r\n        <div class="row filter-row">\r\n                <div class="col-sm-4">\r\n                    <select class="form-control input-sm" ng-model="vm.filter.col" ng-change="vm.columnChanged(filter.col)"\r\n                            ng-options="colDef as colDef.label for colDef in vm.columns">\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-3">\r\n                    <select class="form-control input-sm" ng-model="vm.filter.constraint"\r\n                            ng-options="con as con.label for con in vm.constraints">\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-3" ng-if="!vm.isBool">\r\n                    <input type="text" class="form-control input-sm" ng-model="filter.expression">\r\n                </div>\r\n                <div class="col-sm-3" ng-if="vm.isBool">\r\n                    <select class="form-control input-sm" ng-model="vm.filter.expression"\r\n                            ng-options="bool.value as bool.label for bool in vm.boolValues">\r\n                    </select>\r\n                </div>\r\n                <div class="col-sm-1" style="padding-top: 3px;">\r\n                    <button class="btn btn-warning btn-xs" ng-click="vm.removeFilter(filter.col)">\r\n                        <i class="glyphicon glyphicon-minus"></i>\r\n                    </button>\r\n                </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n'),e.put("rainModules/rainGrid/rainGridFilterModal/rainGridFilterModalTemplate.html",'<div>\r\n    <div class="modal-header">\r\n        <div style="display:inline-block;margin-left: 10px;font-size: 16px;font-weight: bold;">Filters</div>\r\n        <div class="pull-right">\r\n            <button class="btn btn-sm btn-success" ng-click="vm.addFilter()">\r\n                <i class="glyphicon glyphicon-plus "></i>Add filter\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div style="margin:10px;padding-right: 10px;">\r\n\r\n        <div>\r\n            <div ng-repeat="filter in vm.filters">\r\n                <div rain-grid-filter filter="filter" columns="vm.columns" delete-filter="vm.deleteFilter(col)"></div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button class="btn btn-primary" ng-click="vm.doFilter()">Filter</button>\r\n        <button class="btn btn-warning" ng-click="vm.doCancel()">Cancel</button>\r\n    </div>\r\n</div>'),e.put("rainModules/rainGrid/rainGridMenu/rainGridMenuTemplate.html",'<div class="rain-grid-menu">\r\n    <div class="btn-group" dropdown is-open="status.isOpen">\r\n        <i class="fa fa-cog  dropdown-toggle" style="font-size: 23px;margin-left: 10px;"\r\n           dropdown-toggle ng-disabled="disabled"></i>\r\n        <ul class="dropdown-menu" role="menu" >\r\n            <li>\r\n                <a ng-click="vm.doFilter()">\r\n                    <i class="glyphicon glyphicon-filter menu-item-icon" style="margin-right: 5px;color: #337AB7;"></i>\r\n\r\n                    <div style="display: inline-block;">Filter</div>\r\n                </a>\r\n            </li>\r\n            <li ng-if="hasFiltered">\r\n                <a href="#" ng-click="vm.removeFilters()">\r\n                    <i class="fa fa-times menu-item-icon" ></i>\r\n\r\n                    <div style="display: inline-block;">Remove Filters</div>\r\n                </a>\r\n            </li>\r\n            <li class="divider" style="border-width: 0;"></li>\r\n            <li>\r\n                <a>\r\n                    <i class="fa fa-file-excel-o menu-item-icon" style="color: green;"></i>\r\n                    <span>Export To Excel</span>\r\n                </a>\r\n            </li>\r\n            <li>\r\n                <a>\r\n                    <i class="fa fa-file-pdf-o menu-item-icon" style="color: red;"></i>\r\n                    <span>Export To PDF</span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n\r\n</div>\r\n\r\n')}]);var rain;!function(e){var i;!function(e){var i=function(){function e(){this.transclude=!0,this.scope={headerTitle:"@",headerSubTitle:"@",iconFile:"@",router:"@"},this.controller="rainFramework.controller",this.controllerAs="vm",this.templateUrl="rainModules/rainFramework/rainFrameworkTemplate.html"}return e.instance=function(){return new e},e}();angular.module("rainFramework",["rainMenu"]).directive("rainFramework",i.instance)}(i=e.framework||(e.framework={}))}(rain||(rain={})),angular.module("rainFramework").run(["$templateCache",function(e){e.put("rainModules/rainFramework/rainFrameworkTemplate.html",'<div class=r-title-bar><div class=row><div class="r-logo-area col-xs-7"><img ng-src={{iconFile}} alt class=r-icon><div class=r-title-area><p class=r-logo-title>{{headerTitle}}</p><p class=r-logo-subtitle>{{headerSubTitle}}</p></div></div><div class="r-right-side-controls col-xs-5"><div class=pull-right><div><div style="text-align: right;margin-right: 10px;display: inline-block;"><div class="cellphone-hide welcome">Welcome <strong>{{vm.username}}!</strong></div><a class="btn-logout r-nav-button" ng-click=vm.logout()><i class="fa fa-sign-out"></i></a></div><div ng-if=vm.isMenuButtonVisible class=r-collapsed-menu><a class=r-nav-button ng-click=vm.menuButtonClicked()><i class="fa fa-bars"></i></a></div></div></div></div></div></div><div ng-transclude></div><div ng-switch=vm.routerName class=rain-view ng-class="{\'rain-view-full-width\':vm.isFullWidth()}"><div ng-switch-when=NGNEWROUTER><ng-viewport>{{vm.routeString}}</ng-viewport></div><div ng-switch-when=UIROUTER><div ui-view></div></div><div ng-switch-default><div ng-view>{{vm.routeString}}</div></div></div>')}]);var rainService;!function(e){angular.module("rainService",[])}(rainService||(rainService={}));var rainService;!function(e){var i;!function(e){var i=function(){function e(e){this.$http=e}return e.prototype.getDataList=function(e){return this.$http.get(e.url).then(function(e){return e.data})},e.prototype.getDataById=function(e,i){return this.$http.get(e.url+"/"+i).then(function(e){return e.data})},e.prototype.deleteDataById=function(e,i){return this.$http["delete"](e.url+"/"+i).then(function(e){return e.data})},e.prototype.deleteDataByQueryString=function(e,i){return this.$http["delete"](e.url+"?"+i).then(function(e){return e.data})},e.prototype.addOrUpdateData=function(e,i){return this.$http.post(e.url,i).then(function(e){return e.data})},e.$inject=["$http"],e}();e.RepositoryService=i,angular.module("rainService").service("rainService.repository",i)}(i=e.repository||(e.repository={}))}(rainService||(rainService={}));var CurrentUser=rainService.currentUser,rainService;!function(e){var i;!function(e){function i(e,i){return new n(e,i)}var n=function(){function e(i,n){this.$http=i,this.currentUser=n,this.token={createToken:e.createToken,decryptToken:e.decryptToken}}return e.prototype.login=function(i,n,t){var r=this,o={header:{"Content-Type":"application/x-www-form-urlencoded"}},a=e.formEncode({username:n,password:t,grant_type:"password"});return r.$http.post(i,a,o).then(function(e){return r.currentUser.setProfile(n,e.data.access_token),e},function(e){return e})},e.prototype.logout=function(){this.currentUser.logout()},e.createToken=function(e,i,n){var t="";return n&&(t="&role="+n.key.trim()),"username="+e.trim()+"&password="+i.trim()+t},e.decryptToken=function(i){return e.parseQueryString(i)},e.parseQueryString=function(e){var i,n,t,r,o={};for(i=e.split("&"),t=0,r=i.length;r>t;t++)n=i[t].split("="),o[n[0]]=n[1];return o},e.formEncode=function(e){var i=[];for(var n in e)i.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return i.join("&").replace(/%20/g,"+")},e}();i.$inject=["$http","rainService.currentUser"],angular.module("rainService").factory("rainService.oauth",i)}(i=e.oauth||(e.oauth={}))}(rainService||(rainService={}));var rainService;!function(e){var i;!function(e){function i(e){return new n(e)}var n=function(){function e(e){this.$window=e,this.store=e.localStorage}return e.prototype.add=function(e,i){i=angular.toJson(i),this.store.setItem(e,i)},e.prototype.get=function(e){var i=this.store.getItem(e);return i&&(i=angular.fromJson(i)),i},e.prototype.remove=function(e){this.store.removeItem(e)},e}();e.RainServiceLocalStorage=n,i.$inject=["$window"],angular.module("rainService").factory("rainService.localStorage",i)}(i=e.localStorage||(e.localStorage={}))}(rainService||(rainService={}));var CurrentUser=rainService.currentUser,rainService;!function(e){var i;!function(e){function i(e,i){return new r(e,i)}function n(e,i,n){return new o(e,i,n)}var t=angular.module("rainService"),r=function(){function e(i,n){this.$q=i,this.currentUser=n,e._currentUser=this.currentUser,e._q=this.$q}return e.prototype.request=function(i){var n=e._currentUser,t=e._q;return n.profile.loggedIn&&(i.headers.Authorization="Bearer "+n.profile.token),t.when(i)},e}();i.$inject=["$q","rainService.currentUser"],t.factory("rainService.addToken",i);var o=function(){function e(e,i,n){this.$q=e,this.$rootScope=i,this.$location=n,this.responseError=this.funcResponseError(this.$q,this.$rootScope,this.$location)}return e.prototype.funcResponseError=function(e,i,n){return function(t){return(401==t.status||403==t.status)&&i.$broadcast("AUTHENTICATION_EVENT",{statusCode:t.status,requestedPath:n.path(),eventSource:"rainService.loginRedirect.responseError"}),e.reject(t)}},e}();n.$inject=["$q","$rootScope","$location"],t.factory("rainService.loginRedirect",n),t.config(["$httpProvider",function(e){e.interceptors.push("rainService.addToken")}]),t.config(["$httpProvider",function(e){e.interceptors.push("rainService.loginRedirect")}])}(i=e.httpInterceptor||(e.httpInterceptor={}))}(rainService||(rainService={}));var rainService;!function(e){var i;!function(e){function i(e){return new n(e)}var n=function(){function e(i){this.$$modal=i,e.$modal=i}return e.prototype.confirmModal=function(i,n,t){function r(e,i){e.ok=function(){t&&angular.isFunction(t)&&t(),i.close(!0)},e.cancel=function(){i.close(!1)}}function o(e,i){return'<div class="modal-header"><h3 class="modal-title">'+e+'</h3></div><div class="modal-body"><p style="font-size: 16px;">'+i+'</p></div><div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">Yes</button><button class="btn btn-warning" ng-click="cancel()">No</button></div>'}i=i||"Confirm",n=n||"Are you sure?";var a=e.$modal.open({template:o(i,n),controller:["$scope","$modalInstance",r]});return a.result},e.prototype.messageModal=function(i,n,t){function r(e,i){e.ok=function(){t&&angular.isFunction(t)&&t(),i.close(!0)}}function o(e,i){return'<div class="modal-header"><h3 class="modal-title">'+e+'</h3></div><div class="modal-body">'+i+'</div><div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">Close</button></div>'}i=i||"Information",n=n||"<p></p>";var a=e.$modal.open({template:o(i,n),controller:["$scope","$modalInstance",r]});return a.result},e}();e.RainConfirm=n,i.$inject=["$modal"],angular.module("rainService").factory("rainService.dialog",i)}(i=e.dialog||(e.dialog={}))}(rainService||(rainService={}));var storage=rainService.localStorage,rainService;!function(e){var i;!function(e){function i(e){return new n(e)}var n=function(){function e(e){this.localStorage=e,this.userKey="tokenKey",this.profile=this.getProfile()}return e.prototype.setProfile=function(e,i){this.profile.username=e,this.profile.token=i,this.localStorage.add(this.userKey,this.profile)},e.prototype.logout=function(){this.profile.username="",this.profile.token="",this.localStorage.remove(this.userKey)},e.prototype.getProfile=function(){var e={username:"",token:"",loggedIn:function(){return!!this.token}},i=this.localStorage.get(this.userKey);return i&&(e.username=i.username,e.token=i.token),e},e}();e.RainServiceCurrentUser=n,i.$inject=["rainService.localStorage"],angular.module("rainService").factory("rainService.currentUser",i)}(i=e.currentUser||(e.currentUser={}));

}(rainService||(rainService={}));var rain;!function(e){var i;!function(e){var i=function(){function e(){this.restrict="EA",this.require="ngModel",this.link=function(e,i,n,t){e.$watch(n.ngModel,function(e,i){if(e){var r=String(e).split("");if(0!==r.length&&(1!==r.length||"-"!=r[0]&&"."!==r[0])&&(2!==r.length||"-."!==e)){if(r.indexOf(".")>0){var o=n.numberOnly;["0","1","2","3","4","5"].indexOf(o)>=0&&(o=parseInt(o),r.length-r.indexOf(".")>o+1&&(t.$setViewValue(i),t.$render()))}isNaN(e)&&(t.$setViewValue(i),t.$render())}}})}}return e.instance=function(){return new e},e}();angular.module("rainNumberOnly",[]).directive("numberOnly",i.instance)}(i=e.numberOnly||(e.numberOnly={}))}(rain||(rain={}));var rain;!function(e){var i;!function(e){var i=function(){function e(e,i){this.$scope=e,this.$rootScope=i,this.setPublicFunctions=function(e,i){var n=this;n.setActiveElement=function(i){e.activeElement=i},n.getActiveElement=function(){return e.activeElement},n.setActiveGroupElement=function(i){e.activeGroupElement=i},n.getActiveGroupElement=function(){return e.activeGroupElement},n.isVertical=function(){return e.isVertical},n.setOpenMenuScope=function(i){e.openMenuScope=i},n.closeCurrentMenu=function(){e.openMenuScope&&e.openMenuScope.closeMenu()},n.setRoute=function(e){e&&i.$broadcast("rain-menu-item-selected-event",{route:e})}},this.setEventHandlers=function(e,i){e.$on("rain-menu-show",function(i,n){e.showMenu=n.show,e.isVertical=n.isVertical,e.allowHorizontalMenu=n.allowHorizontalMenu,e.isFloatVerticalMenu=n.isFloatVerticalMenu}),e.toggleMenuOrientation=function(){e.isVertical=!e.isVertical,i.$broadcast("rain-menu-orientation-changed-event",{isMenuVertical:e.isVertical})},angular.element(document).bind("click",function(i){if(e.openMenuScope&&!e.isVertical){if($(i.target).parent().hasClass("r-selectable-item"))return;e.$apply(function(){e.openMenuScope.closeMenu()}),i.preventDefault(),i.stopPropagation()}})};var n=e.horizontalMenu;e.showMenu=!0,e.isVertical=!0,e.openMenuScope=null,e.allowHorizontalMenu=!0;var t=this;t.setPublicFunctions(e,i),t.setEventHandlers(e,i),n&&e.toggleMenuOrientation()}return e.prototype.getActiveElement=function(){return void 0},e.prototype.getActiveGroupElement=function(){return void 0},e.prototype.setRoute=function(e){},e.prototype.isVertical=function(){return void 0},e.prototype.setOpenMenuScope=function(e){},e.prototype.setActiveGroupElement=function(e){},e.prototype.setActiveElement=function(e){},e.prototype.closeCurrentMenu=function(){},e.$inject=["$scope","$rootScope"],e}();angular.module("rainMenu").controller("rainMenu.controller",i)}(i=e.menu||(e.menu={}))}(rain||(rain={})),function(){function e(e,i){function n(e,i,n){if(!e||0>=i)return null;try{var t=(i-1)*n,r=_.slice(e,t,t+n);return r?r:null}catch(o){return console.log(o.message),null}}function t(e){var i=[];return angular.forEach(e,function(e){i.push({fieldName:e.field,displayName:e.displayName,isHidden:e.isHidden})}),i}function r(e){var i=e.dataList,n=e.columnDefs,r=null,o=null,a={rows:[],header:t(n)};return 0==i.length?a:(a.rows=_.map(i,function(i){var t=[];if(n){r=e.idField,r&&(o=i[e.idField]);for(var a=0;a<n.length;a++){var s=n[a];t.push({id:i[e.idField],fieldName:s.field,value:i[s.field]||s.field,displayName:s.displayName,isCheckbox:s.isCheckbox,isCurrency:s.isCurrency,isNumber:s.isNumber,decimal:s.decimal,isLink:s.isLink,isButton:s.isButton,isIcon:s.isIcon,isDate:s.isDate,isHidden:s.isHidden||!1,linkFunc:s.linkFunc||{funcName:"",funcIdField:""},order:a})}}else for(var l in i)i.hasOwnProperty(l)&&t.push({fieldName:l,value:i[l],displayName:l});return{fields:t,rowSelected:!1,idField:r,id:o}}),e.selectFirstRow&&a.rows.length>0&&(a.rows[0].rowSelected=!0),a)}function o(e,i,n,t){var r=i[t];if(!n||!r)return e;var o=_.sortBy(e,function(e){for(var i=e.fields,t=null,r=0;r<i.length;r++)if(i[r].fieldName===n)return t=i[r].value});return r===i[1]?o:o.reverse()}function a(){$('ul.pagination a:Contains("<<"):first').html("<i class='fa fa-angle-double-left page-arrow'></i>"),$('ul.pagination a:Contains(">>"):first').html("<i class='fa fa-angle-double-right page-arrow'></i>"),$('ul.pagination a:Contains("<"):first').html("<i class='fa fa-angle-left page-arrow'></i>"),$('ul.pagination a:Contains(">"):first').html("<i class='fa fa-angle-right page-arrow'></i>")}function s(e,n){var t=i.open({templateUrl:"rainModules/rainGrid//rainGridFilterModal/rainGridFilterModalTemplate.html",controller:"rainGrid.filterModal.controller",resolve:{columnDefs:function(){return e.columnDefs},filters:function(){return n}}});return t.result}function l(e){var i=[],n="text";switch(e.isNumber||e.isCurrency?n="number":e.isBoolean?n="bool":e.isDate&&(n="date"),n){case"number":i=[{label:"equal to",value:"EqualsTo"},{label:"greater than",value:"GreaterThan"},{label:"less than",value:"LessThan"}];break;case"bool":i=[{label:"equal to",value:"EqualsTo"}];break;case"date":i=[{label:"equal to",value:"EqualsTo"},{label:"greater than",value:"GreaterThan"},{label:"less than",value:"LessThan"}];break;default:i=[{label:"equal to",value:"EqualsTo"},{label:"greater than",value:"GreaterThan"},{label:"less than",value:"LessThan"},{label:"Contains",value:"Contains"},{label:"starts with",value:"StartsWith"}]}return i}function c(e,i){var n=[];return n=0!==i.length&&i[0].col?_.filter(e,function(e){for(var n=e.fields,t=!0,r=0;r<n.length;r++){for(var o=n[r],a=0;a<i.length;a++){var s=i[a],l=s.col.value,c=s.constraint.value,u=s.expression;if(o.fieldName===l){switch(c){case"EqualsTo":t=t&&o.value==u;break;case"GreaterThan":t=t&&o.value>u;break;case"LessThan":t=t&&o.value<u;break;case"Contains":t=t&&o.value.indexOf(u)>=0;break;case"StartsWith":t=t&&0===o.value.indexOf(u)}if(!t)break}}if(!t)break}return t}):e}return{modifyPaginationIcons:a,getDataListByPage:n,buildGridData:r,sortData:o,showFilterModal:s,getFilterConstraintsByColumnType:l,filterData:c}}angular.module("rainGrid").factory("rainGridService",["$parse","$modal",e])}(),function(){function e(){return{restrict:"AE",templateUrl:"rainModules/rainGrid/_rainGridTemplate.html",replace:!1,scope:{rainGrid:"="},controller:"rainGrid.controller"}}angular.module("rainGrid").directive("rainGrid",[e])}(),function(){function e(e,i,n){function t(){r(),e.gridOptions.data.then(function(e){o(e)})}function r(){e.gridOptions={enablePage:!0,pageSize:10,selectable:!1,showToolMenu:!0},e.gridOptions=_.assign(e.gridOptions,e.rainGrid),e.selectable=e.gridOptions.selectable,e.actionButtonPlace=0,e.showToolMenu=e.gridOptions.showToolMenu,e.title=e.gridOptions.title,a()}function o(i){e.gridOptions.dataList=i,e.gridData=u(e.gridOptions),e.sortField=null,e.sortOrder=null,e.currentPage=1,s(),l(e.gridData),n.setPaginationIcons()}function a(){if(e.gridOptions.deleteLink&&e.gridOptions.deleteLink.enable){if(e.showDeleteButton=!0,e.gridOptions.deleteLink.place)e.actionButtonPlace=e.gridOptions.deleteLink.place;else for(var i=0;i<e.gridOptions.columnDefs.length;i++)if(!e.gridOptions.columnDefs[i].isHidden){e.actionButtonPlace=i;break}e.deleteEvent=e.gridOptions.deleteLink.funcEvent,e.deleteEventIdField=e.gridOptions.deleteLink.funcIdField}if(e.gridOptions.editLink&&e.gridOptions.editLink.enable){if(e.showEditButton=!0,e.gridOptions.editLink.place)e.actionButtonPlace=e.gridOptions.editLink.place;else for(var n=0;n<e.gridOptions.columnDefs.length;n++)if(!e.gridOptions.columnDefs[n].isHidden){e.actionButtonPlace=n;break}e.editEvent=e.gridOptions.editLink.funcEvent,e.editEventIdField=e.gridOptions.editLink.funcIdField}}function s(){if(e.enablePage=e.gridOptions.enablePage,e.currentPage=1,e.maxSize=2,e.pageSizes=[{label:" 5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20}],e.pageSize=e.pageSizes[1],e.gridOptions.pageSize){var i=_.find(e.pageSizes,function(i){return i.value==e.gridOptions.pageSize});i&&(e.pageSize=i)}}function l(i){e.currentPage=1,h=0,v=null,d=i.rows,e.header=i.header,e.rowCount=d.length,e.enablePage=e.gridOptions.enablePage&&e.rowCount>e.pageSizes[0].value,p=d,c(p)}function c(i){if(!e.enablePage)return e.list=i,e.list;var t=n.getDataListByPage(i,e.currentPage,e.pageSize.value,v,f[h]);return t&&(e.list=t,angular.forEach(e.list,function(i){i.rowSelected&&i!=e.selectedRow&&(i.rowSelected=!1)})),e.list}function u(i){var t=n.buildGridData(i);return t.rows.length>0&&t.rows[0].rowSelected&&(e.selectedRow=t.rows[0]),t}e.gridOptions={};var d=[],p=[],f=[null,"ASC","DSC"],h=0,v=null,g=!1,m=[];e.$watch("rainGrid.data",function(){t()}),e.filterData=function(i){p=n.filterData(d,i),g=i.length>0&&!!i[0].col,g&&(m=p),e.rowCount=p.length,e.enablePage=e.gridOptions.enablePage&&e.rowCount>e.pageSizes[0].value,e.sortField=null,e.sortOrder=null,e.currentPage=1,c(p)},e.linkTo=function(e,n,t){var r=_.find(e,function(e){return e.field===t});if(r){var o=r.value;i.$broadcast(n,{id:o})}},e.pageSizeChanged=function(i){e.currentPage=1,c(p)},e.pageChanged=function(){c(p)},e.sortingChanged=function(i){v!==i?h=1:(h+=1,h>2&&(h=0)),v=i,e.sortField=i,e.sortOrder=f[h];var t=g?m:d;p=n.sortData(t,f,v,h),c(p)},e.selectRow=function(n){if(e.selectable){var t=n.rowSelected;if(angular.forEach(e.list,function(e){e.rowSelected=!1}),n.rowSelected=!t,n.rowSelected&&(e.selectedRow=n),n.rowSelected&&e.gridOptions.rowSelectedEvent){var r=e.gridOptions.rowSelectedEvent.funcEvent;i.$broadcast(r,{id:n.id})}}},e.deleteRecord=function(n){if(e.deleteEvent&&e.deleteEventIdField){var t=_.find(n.fields,function(i){return i.field==e.deleteEventIdField});if(t){var r=t.value;i.$broadcast(e.deleteEvent,{id:r})}}},e.editRecord=function(n){if(e.editEvent&&e.editEventIdField){var t=_.find(n.fields,function(i){return i.field==e.editEventIdField});if(t){var r=t.value;i.$broadcast(e.editEvent,{id:r})}}}}angular.module("rainGrid").controller("rainGrid.controller",e),e.$inject=["$scope","$rootScope","rainGridService"]}();var RainGrid;!function(e){e.baseUrl="rainModules/rainGrid/",function(e){e[e.NONE=0]="NONE",e[e.ASC=1]="ASC",e[e.DSC=2]="DSC"}(e.SortingOptions||(e.SortingOptions={}));var i=e.SortingOptions;e.FilterConstraint={EqualsTo:{label:"equal to",value:"EqualsTo"},GreaterThan:{label:"greater than",value:"GreaterThan"},LessThan:{label:"less than",value:"LessThan"},Contains:{label:"Contains",value:"Contains"},StartsWith:{label:"starts with",value:"StartsWith"}};var n=function(){function n(e,i){this.$parse=e,this.$modal=i}return n.prototype.setPaginationIcons=function(){$('ul.pagination a:contains("<<"):first').html("<i class='fa fa-angle-double-left page-arrow'></i>"),$('ul.pagination a:contains(">>"):first').html("<i class='fa fa-angle-double-right page-arrow'></i>"),$('ul.pagination a:contains("<"):first').html("<i class='fa fa-angle-left page-arrow'></i>"),$('ul.pagination a:contains(">"):first').html("<i class='fa fa-angle-right page-arrow'></i>")},n.prototype.getDataListByPage=function(e,i,n){if(!e||0>=i)return null;try{var t=(i-1)*n,r=_.slice(e,t,t+n);return r?r:null}catch(o){return console.log(o.message),null}},n.prototype.buildHeader=function(e){var i=[];return angular.forEach(e,function(e){i.push({fieldName:e.field,displayName:e.displayName,isHidden:e.isHidden})}),i},n.prototype.buildGridData=function(e){var i=e.dataList,n=e.columnDefs,t=null,r=null,o={rows:[],header:this.buildHeader(n)};return 0==i.length?o:(o.rows=_.map(i,function(i){var o=[];if(n){t=e.idField,t&&(r=i[e.idField]);for(var a=0;a<n.length;a++){var s=n[a],l={id:i[e.idField],field:s.field,value:null===i[s.field]||void 0===i[s.field]?"":i[s.field],displayName:s.displayName,isCheckbox:s.isCheckbox,isCurrency:s.isCurrency,isNumber:s.isNumber,decimal:s.decimal,isLink:s.isLink,isButton:s.isButton,isIcon:s.isIcon,isDate:s.isDate,isHidden:s.isHidden||!1,linkFunc:s.linkFunc||{funcEvent:"",funcIdField:""},order:a};o.push(l)}}else for(var c in i)i.hasOwnProperty(c)&&o.push({field:c,value:i[c],displayName:c});var u={fields:o,rowSelected:!1,idField:t,id:r};return u}),e.selectFirstRow&&o.rows.length>0&&(o.rows[0].rowSelected=!0),o)},n.prototype.getFilterConstraintsByColumnType=function(i){var n=[],t="text";switch(i.isNumber||i.isCurrency?t="number":i.isBoolean?t="bool":i.isDate&&(t="date"),t){case"number":n=[e.FilterConstraint.Contains,e.FilterConstraint.GreaterThan,e.FilterConstraint.LessThan];break;case"bool":n=[e.FilterConstraint.EqualsTo];break;case"date":n=[e.FilterConstraint.EqualsTo,e.FilterConstraint.GreaterThan,e.FilterConstraint.LessThan];break;default:n=[e.FilterConstraint.EqualsTo,e.FilterConstraint.GreaterThan,e.FilterConstraint.LessThan,e.FilterConstraint.Contains,e.FilterConstraint.StartsWith]}return n},n.prototype.showFilterModal=function(i,n){var t=this.$modal.open({templateUrl:e.baseUrl+"rainGridFilterModal/rainGridFilterModalTemplate.html",controller:"rainGrid.filterModal.controller",controllerAs:"vm",resolve:{columnDefs:function(){return i.columnDefs},filters:function(){return n}}});return t.result},n.prototype.sortData=function(e,n,t){if(!n||t===i.NONE)return e;var r=_.sortBy(e,function(e){for(var i=e.fields,t=null,r=0;r<i.length;r++)if(i[r].field===n)return t=i[r].value});return t===i.ASC?r:r.reverse()},n.prototype.filterData=function(i,n){var t=[];return t=0!==n.length&&n[0].col?_.filter(i,function(i){for(var t=i.fields,r=!0,o=0;o<t.length;o++){for(var a=t[o],s=0;s<n.length;s++){var l=n[s],c=l.col.value,u=l.constraint.value,d=l.expression;if(a.field===c){switch(u){case e.FilterConstraint.EqualsTo.value:r=r&&a.value==d;break;case e.FilterConstraint.GreaterThan.value:r=r&&a.value>d;break;case e.FilterConstraint.LessThan.value:r=r&&a.value<d;break;case e.FilterConstraint.Contains.value:r=r&&a.value.indexOf(d)>=0;break;case e.FilterConstraint.StartsWith.value:r=r&&0===a.value.indexOf(d)}if(!r)break}}if(!r)break}return r}):i},n.$inject=["$parse","$modal"],n}();e.RainGridService=n,angular.module("rainGrid").service("rainGridService",n)}(RainGrid||(RainGrid={}));var RainGrid;!function(e){var i=function(){function i(e,i,n){var t=this;this.$scope=e,this.$rootScope=i,this.rainGridService=n,this._dataRows=[],this._dataList=[],this._sortingOptions=[null,"ASC","DSC"],this._currentSortIndex=0,this._currentSortField=null,this._isFiltered=!1,this._dataRowsFiltered=[],this.$scope.$watch("rainGrid.data",function(){t.activate()}),this.$scope.filterData=this.filterData,this.$scope.linkTo=this.linkTo,this.$scope.selectRow=this.selectRow,this.$scope.deleteRecord=this.deleteRecord,this.$scope.editRecord=this.editRecord}return i.prototype.activate=function(){var e=this;this.buildGridOptions(),this.$scope.gridOptions.data.then(function(i){e.initRainGrid(i)})},i.prototype.buildGridOptions=function(){var e={enablePage:!0,pageSize:10,selectable:!1,showToolMenu:!0};this.$scope.gridOptions=_.assign(e,this.$scope.rainGrid),this.$scope.selectable=this.$scope.gridOptions.selectable,this.$scope.actionButtonPlace=0,this.$scope.showToolMenu=this.$scope.gridOptions.showToolMenu,this.$scope.title=this.$scope.gridOptions.title,this.setActionButtons()},i.prototype.initRainGrid=function(e){this.$scope.gridOptions.dataList=e,this.$scope.gridData=this.getGridData(this.$scope.gridOptions),this.$scope.sortField=null,this.$scope.sortOrder=null,this.$scope.currentPage=1,this.initPage(),this.initData(this.$scope.gridData),this.rainGridService.setPaginationIcons()},i.prototype.setActionButtons=function(){if(this.$scope.gridOptions.deleteLink&&this.$scope.gridOptions.deleteLink.enable){if(this.$scope.showDeleteButton=!0,this.$scope.gridOptions.deleteLink.place)this.$scope.actionButtonPlace=this.$scope.gridOptions.deleteLink.place;else for(var e=0;e<this.$scope.gridOptions.columnDefs.length;e++)if(!this.$scope.gridOptions.columnDefs[e].isHidden){this.$scope.actionButtonPlace=e;break}this.$scope.deleteEvent=this.$scope.gridOptions.deleteLink.funcEvent,this.$scope.deleteEventIdField=this.$scope.gridOptions.deleteLink.funcIdField}if(this.$scope.gridOptions.editLink&&this.$scope.gridOptions.editLink.enable){if(this.$scope.showEditButton=!0,this.$scope.gridOptions.editLink.place)this.$scope.actionButtonPlace=this.$scope.gridOptions.editLink.place;else for(var i=0;i<this.$scope.gridOptions.columnDefs.length;i++)if(!this.$scope.gridOptions.columnDefs[i].isHidden){this.$scope.actionButtonPlace=i;break}this.$scope.editEvent=this.$scope.gridOptions.editLink.funcEvent,this.$scope.editEventIdField=this.$scope.gridOptions.editLink.funcIdField}},i.prototype.initPage=function(){var e=this;if(this.$scope.enablePage=this.$scope.gridOptions.enablePage,this.$scope.currentPage=1,this.$scope.maxSize=2,this.$scope.pageSizes=[{label:" 5",value:5},{label:"10",value:10},{label:"15",value:15},{label:"20",value:20}],this.$scope.pageSize=this.$scope.pageSizes[1],this.$scope.gridOptions.pageSize){var i=_.find(this.$scope.pageSizes,function(i){return i.value==e.$scope.gridOptions.pageSize});i&&(this.$scope.pageSize=i)}},i.prototype.filterData=function(e){this._dataList=this.rainGridService.filterData(this._dataRows,e),this._isFiltered=e.length>0&&!!e[0].col,this._isFiltered&&(this._dataRowsFiltered=this._dataList),this.$scope.rowCount=this._dataList.length,this.$scope.enablePage=this.$scope.gridOptions.enablePage&&this.$scope.rowCount>this.$scope.pageSizes[0].value,this.$scope.sortField=null,this.$scope.sortOrder=null,this.$scope.currentPage=1,this.getPageData(this._dataList)},i.prototype.initData=function(e){this.$scope.currentPage=1,this._currentSortIndex=0,this._currentSortField=null,this._dataRows=e.rows,this.$scope.header=e.header,this.$scope.rowCount=this._dataRows.length,this.$scope.enablePage=this.$scope.gridOptions.enablePage&&this.$scope.rowCount>this.$scope.pageSizes[0].value,this._dataList=this._dataRows,this.getPageData(this._dataList)},i.prototype.getPageData=function(e){var i=this;if(!this.$scope.enablePage)return this.$scope.list=e,this.$scope.list;var n=this.rainGridService.getDataListByPage(e,this.$scope.currentPage,this.$scope.pageSize.value);return n&&(this.$scope.list=n,angular.forEach(this.$scope.list,function(e){e.rowSelected&&e!=i.$scope.selectedRow&&(e.rowSelected=!1)})),this.$scope.list},i.prototype.getGridData=function(e){var i=this.rainGridService.buildGridData(e);return i.rows.length>0&&i.rows[0].rowSelected&&(this.$scope.selectedRow=i.rows[0]),i},i.prototype.linkTo=function(e,i,n){var t=_.find(e,function(e){return e.field===n});if(t){var r=t.value;this.$rootScope.$broadcast(i,{id:r})}},i.prototype.pageSizeChanged=function(e){this.$scope.currentPage=1,this.getPageData(this._dataList)},i.prototype.pageChanged=function(){this.getPageData(this._dataList)},i.prototype.sortingChanged=function(i){var n=e.SortingOptions.NONE;this._currentSortField!==i?(this._currentSortIndex=1,n=e.SortingOptions.ASC):(this._currentSortIndex=this._currentSortIndex+1,n=e.SortingOptions.DSC,this._currentSortIndex>2&&(this._currentSortIndex=0,n=e.SortingOptions.NONE)),this._currentSortField=i,this.$scope.sortField=i,this.$scope.sortOrder=this._sortingOptions[this._currentSortIndex];var t=this._isFiltered?this._dataRowsFiltered:this._dataRows;this._dataList=this.rainGridService.sortData(t,this._currentSortField,n),this.getPageData(this._dataList)},i.prototype.selectRow=function(e){if(this.$scope.selectable){var i=e.rowSelected;if(angular.forEach(this.$scope.list,function(e){e.rowSelected=!1}),e.rowSelected=!i,e.rowSelected&&(this.$scope.selectedRow=e),e.rowSelected&&this.$scope.gridOptions.rowSelectedEvent){var n=this.$scope.gridOptions.rowSelectedEvent.funcEvent;this.$rootScope.$broadcast(n,{id:e.id})}}},i.prototype.deleteRecord=function(e){var i=this;if(this.$scope.deleteEvent&&this.$scope.deleteEventIdField){var n=_.find(e.fields,function(e){return e.field==i.$scope.deleteEventIdField});if(n){var t=n.value;this.$rootScope.$broadcast(this.$scope.deleteEvent,{id:t})}}},i.prototype.editRecord=function(e){var i=this;if(this.$scope.editEvent&&this.$scope.editEventIdField){var n=_.find(e.fields,function(e){return e.field==i.$scope.editEventIdField});if(n){var t=n.value;this.$rootScope.$broadcast(this.$scope.editEvent,{id:t})}}},i.$inject=["$scope","$rootScope","rainGridService"],i}();angular.module("rainGrid").controller("rainGrid.controller",i)}(RainGrid||(RainGrid={}));var RainGrid;!function(e){function i(){return new n}var n=function(){function e(){this.restrict="AE",this.templateUrl="rainModules/rainGrid/_rainGridTemplate.html",this.replace=!1,this.scope={rainGrid:"="},this.controller="rainGrid.controller",this.controllerAs="vm"}return e}();angular.module("rainGrid",[]).directive("rainGrid",i)}(RainGrid||(RainGrid={}));var rain;!function(e){var i;!function(e){var i=function(){function e(e,i,n,t,r,o){var a=this;this.$scope=e,this.$window=i,this.$timeout=n,this.$rootScope=t,this.currentUser=r,this.oauth=o,this.narrowScreen=768;var s=this;s.isMenuButtonVisible=!0,s.isVerticalMenuVisible=!0,s.isMenuVertical=!0,s.routerName=e.router.trim().toUpperCase(),s.username=r.profile.username,s.isFullWidth=function(){return!s.isMenuVertical||!s.isVerticalMenuVisible||s.isFloatVerticalMenu},this.setupEvents(),n(function(){a.checkWidth()},0)}return e.prototype.isFullWidth=function(){return void 0},e.prototype.menuButtonClicked=function(){},e.prototype.logout=function(){this.oauth.logout(),this.$scope.$emit("AUTHENTICATION_EVENT",{statusCode:401,eventSource:"rainFramework.controller.logout"})},e.prototype.setupEvents=function(){var e=this;e.$scope.$on("rain-menu-item-selected-event",function(i,n){e.routeString=n.route,e.routeString&&e.broadcastRoute(e.routeString),e.checkWidth()}),this.$scope.$on("rain-menu-orientation-changed-event",function(i,n){e.isMenuVertical=n.isMenuVertical}),$(e.$window).on("resize.rainFramework",function(){e.$scope.$apply(function(){e.checkWidth()})}),$(e.$window).on("$destroy",function(){$(e.$window).off("resize.rainFramework")}),e.menuButtonClicked=function(){e.isVerticalMenuVisible=!e.isVerticalMenuVisible;var i=Math.max(e.$window.innerWidth,$(e.$window).width());e.isMenuVertical=i<=e.narrowScreen,e.broadcastMenuState()}},e.prototype.checkWidth=function(){var e=Math.max(this.$window.innerWidth,$(this.$window).width());this.isVerticalMenuVisible=e>this.narrowScreen,this.isFloatVerticalMenu=e<=this.narrowScreen,this.isMenuButtonVisible=!this.isVerticalMenuVisible,this.broadcastMenuState()},e.prototype.broadcastRoute=function(e){this.$rootScope.$broadcast("rain-change-route-event",{route:e})},e.prototype.broadcastMenuState=function(){this.$rootScope.$broadcast("rain-menu-show",{show:this.isVerticalMenuVisible,isVertical:this.isMenuVertical,isFloatVerticalMenu:this.isFloatVerticalMenu,allowHorizontalMenu:!this.isMenuButtonVisible})},e.$inject=["$scope","$window","$timeout","$rootScope","rainService.currentUser","rainService.oauth"],e}();angular.module("rainFramework").controller("rainFramework.controller",i)}(i=e.framework||(e.framework={}))}(rain||(rain={})),function(){angular.module("rainForm",[])}(),function(){function e(e){return{restrict:"A",require:"^form",link:o(e)}}var i=angular.module("rainForm");i.directive("formInput",e),e.$inject=["$compile"];var n=function(e,i){return function(){return i&&e[i]?e.$submitted?e[i].$invalid:e[i].$dirty?e[i].$invalid:!1:void 0}},t=function(e){return function(i){i?(e.addClass("has-error"),e.find(".help-block").show()):(e.removeClass("has-error"),e.find(".help-block").hide())}},r=function(e,i,n){if(e.hasClass("form-group")||0!==e.find(".form-group").length)e.addClass("form-group-sm");else{var t=e.html(),r='<div class="form-group form-group-sm">'+t+"</div>";e.html(i(r)(n))}var o=e[0].querySelector("label");o&&o.classList.add("control-label");var a=e[0].querySelector("input, textarea, select,[ng-model]");if(a){var s=a.getAttribute("type"),l=a.getAttribute("name");return"checkbox"!==s&&"radio"!==s&&a.classList.add("form-control"),l}},o=function(e){return function(i,o,a,s){var l=r(o,e,i);i.$watch(n(s,l),t(o))}}}();var rain;!function(e){var i;!function(e){function i(){return'<div class="rain-checkbox-container"><div class="checkbox-image"><div  class="rain-checkbox"><input type="checkbox" ng-model="rainCheckbox" style="display: inline;"/><label class="checkbox-label" ng-click="vm.onclick()"></label></div></div><div class="checkbox-text">{{text}}</div></div>'}var n=function(){function e(e){this.onclick=function(){e.readonly!==!0&&(e.rainCheckbox=!e.rainCheckbox,e.onChanging())}}return e.prototype.onclick=function(){},e.$inject=["$scope"],e}(),t=function(){function e(){this.restrict="AE",this.template=i(),this.replace=!1,this.scope={rainCheckbox:"=",text:"@",readonly:"=",onChanging:"&"},this.controller=n,this.controllerAs="vm",this.link=function(e,i){function n(){var n=i.find("input:checkbox+label");e.readonly===!0?n.addClass("readonly"):n.removeClass("readonly")}n(),e.$watch("readonly",function(){n()})}}return e.instance=function(){return new e},e}();angular.module("rainCheckbox",[]).directive("rainCheckbox",t.instance)}(i=e.checkbox||(e.checkbox={}))}(rain||(rain={}));